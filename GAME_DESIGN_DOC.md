# æ–‡æ˜ï¼šå¥¥å¾·èµ› (Civilization: Odyssey) - å¼€å‘æ–‡æ¡£

> **å½“å‰ç‰ˆæœ¬**: v0.5.0 (Phase 1: éƒ¨è½æ—¶ä»£ - å®Œæˆ)
> **æœ€åæ›´æ–°**: 2026-01-08
> **å¼€å‘çŠ¶æ€**: Phase 1 å®Œæˆï¼Œç”Ÿäº§å°±ç»ª

---

## ç›®å½•
1. [æ ¸å¿ƒç†å¿µ](#1-æ ¸å¿ƒç†å¿µ)
2. [å·²å®ç°åŠŸèƒ½æ¸…å•](#2-å·²å®ç°åŠŸèƒ½æ¸…å•)
3. [æŠ€æœ¯æ¶æ„](#3-æŠ€æœ¯æ¶æ„)
4. [æ¸¸æˆç³»ç»Ÿè¯¦è§£](#4-æ¸¸æˆç³»ç»Ÿè¯¦è§£)
5. [å¹³è¡¡æ€§æ¨¡å‹](#5-å¹³è¡¡æ€§æ¨¡å‹)
6. [åŸºç¡€ç‰¢é æ€§åˆ†æ](#6-åŸºç¡€ç‰¢é æ€§åˆ†æ)
7. [ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’](#7-ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’)

---

## 1. æ ¸å¿ƒç†å¿µ

### èŒƒå¼è½¬ç§» (The Paradigm Shift)
ä¸ä¼ ç»Ÿçš„"æ•°å€¼æ— é™è†¨èƒ€"ç±»æŒ‚æœºæ¸¸æˆä¸åŒï¼Œæœ¬ä½œçš„æ ¸å¿ƒåœ¨äº**"æ—¶ä»£æ›´è¿­"**ã€‚

æ¯ä¸€ä¸ªæ—¶ä»£ï¼ˆEraï¼‰ä¸ä»…æ˜¯æ›´æ¢èµ„æºåç§°ï¼Œè€Œæ˜¯å½»åº•æ”¹å˜æ ¸å¿ƒäº’åŠ¨æœºåˆ¶ï¼š

- **Era 1: éƒ¨è½æ—¶ä»£ (ç”Ÿå­˜)** - _Man vs Nature_
  - æ ¸å¿ƒä½“éªŒï¼š**å¾®æ“ä¸ç´§è¿«æ„Ÿ**
  - ç©å®¶å¯¹æŠ—"å­£èŠ‚"ç³»ç»Ÿï¼Œå¤å­£å‚¨å¤‡é£Ÿç‰©åº¦è¿‡ä¸¥å†¬
  - å¤±è´¥æ¡ä»¶ï¼šé£Ÿç‰©è€—å°½ â†’ äººå£æ­»äº¡

- **Era 2: ç‹å›½æ—¶ä»£ (ç§©åº)** - _Order vs Chaos_ (æœªå®ç°)
  - æ ¸å¿ƒä½“éªŒï¼š**å¹³è¡¡ä¸ç®¡ç†**
  - å¼•å…¥"å¹¸ç¦åº¦"ä¸"æ”¿ç­–"ç³»ç»Ÿ

- **Era 3: å¸å›½æ—¶ä»£ (å¾æœ)** - _Us vs Them_ (æœªå®ç°)
  - æ ¸å¿ƒä½“éªŒï¼š**åšå¼ˆä¸æˆ˜ç•¥**
  - å¼•å…¥"æ•Œå¯¹æ–‡æ˜"ä¸"åå‹¤çº¿"

- **Era 4: æ˜Ÿé™…æ—¶ä»£ (é£å‡)** - _Matter vs Energy_ (æœªå®ç°)
  - æ ¸å¿ƒä½“éªŒï¼š**è§„æ¨¡åŒ–ä¸ç‰©ç†æ³•åˆ™**
  - å¼•å…¥"è´¨èƒ½è½¬æ¢"ä¸"æˆ´æ£®çƒ"

---

## 2. å·²å®ç°åŠŸèƒ½æ¸…å•

### âœ… Phase 1.0: åŸºç¡€ç³»ç»Ÿ (å·²å®Œæˆ)

#### èµ„æºç³»ç»Ÿ
- [x] **6 ç§èµ„æº**: æµ†æœã€æœ¨æã€æ¯›çš®ã€çŸ³æ–™ã€ç†å¿µã€äººå£
- [x] **å­˜å‚¨ä¸Šé™æœºåˆ¶** (ç†å¿µé™¤å¤–)
- [x] **Decimal.js ç²¾ç¡®æ•°å€¼è®¡ç®—** (é˜²æ­¢æµ®ç‚¹è¯¯å·®)
- [x] **èµ„æºæº¢å‡ºä¿æŠ¤** (è¶…è¿‡ä¸Šé™è‡ªåŠ¨ä¸¢å¼ƒ)

#### æ¸¸æˆå¾ªç¯
- [x] **å›ºå®šæ—¶é—´æ­¥é•¿**: 10 TPS (Ticks Per Second)
- [x] **æš‚åœ/ç»§ç»­/åŠ é€Ÿ**: 1x, 2x, 5x é€Ÿåº¦æ§åˆ¶
- [x] **è‡ªåŠ¨ä¿å­˜**: (è§„åˆ’ä¸­)

#### UI ç»„ä»¶
- [x] **å“åº”å¼å¸ƒå±€**: 3 åˆ—ç½‘æ ¼è®¾è®¡ (å·¦ä¸­å³)
- [x] **æ·±è‰²æ¨¡å¼**: å®Œæ•´æ”¯æŒ
- [x] **å®æ—¶æ›´æ–°**: 200ms è½®è¯¢æœºåˆ¶
- [x] **æ—¥å¿—ç³»ç»Ÿ**: å¸¦é¢œè‰²ç¼–ç çš„äº‹ä»¶è®°å½•

---

### âœ… Phase 1.1: å­£èŠ‚ä¸ç”Ÿå­˜ (å·²å®Œæˆ)

#### å­£èŠ‚ç³»ç»Ÿ
- [x] **4 å­£èŠ‚å¾ªç¯**: æ˜¥ â†’ å¤ â†’ ç§‹ â†’ å†¬
- [x] **å­£èŠ‚é•¿åº¦**: æ¯å­£ 10 å¤© (100 ticks)
- [x] **å­£èŠ‚ä¿®æ­£**:
  - æ˜¥/å¤: é£Ÿç‰©/æœ¨æäº§å‡º +100%
  - ç§‹: æ­£å¸¸äº§å‡º
  - å†¬: é£Ÿç‰©äº§å‡º -90%

#### ç¯ç«ç³»ç»Ÿ
- [x] **æ ¸å¿ƒç”Ÿå­˜æœºåˆ¶**: ç¯ç«ç†„ç­ = æ•ˆç‡ -90%
- [x] **ç‡ƒæ–™æ¶ˆè€—**: 1.0 æœ¨æ/ç§’ (å†¬å­£ 2.0)
- [x] **è‡ªåŠ¨åŠ æŸ´**: å¯å¼€å…³çš„è‡ªåŠ¨æ·»åŠ åŠŸèƒ½
- [x] **çŠ¶æ€æ˜¾ç¤º**: æ­£å¸¸/ä½ç‡ƒæ–™/ç†„ç­
- [x] **å†¬å­£æƒ©ç½š**: æ— ç¯ç« â†’ äººå£å†»æ­»

#### äººå£ç³»ç»Ÿ
- [x] **è‡ªç„¶å¢é•¿**: æœ‰ç›ˆä½™é£Ÿç‰©æ—¶è‡ªåŠ¨å¢åŠ 
- [x] **é¥¥é¥¿æœºåˆ¶**: é£Ÿç‰©è€—å°½ â†’ äººå£æ­»äº¡
- [x] **æœ€å¤§äººå£é™åˆ¶**: é€šè¿‡å»ºç­‘æå‡
- [x] **æ­»äº¡æƒ©ç½š**: é¥¥é¥¿/å†»ç»“å¯¼è‡´äººå£å‡å°‘

---

### âœ… Phase 1.2: èŒä¸šä¸è‡ªåŠ¨åŒ– (å·²å®Œæˆ)

#### èŒä¸šç³»ç»Ÿ
- [x] **3 ç§èŒä¸š**:
  - ğŸ **é‡‡é›†è€…**: äº§å‡ºé£Ÿç‰© (3.0/ç§’)
  - ğŸª“ **ä¼æœ¨å·¥**: äº§å‡ºæœ¨æ (0.5/ç§’)
  - â›ï¸ **ç¢çŸ³å·¥**: äº§å‡ºçŸ³æ–™ (0.1/ç§’, éœ€è§£é”)

- [x] **èŒä¸šåˆ†é… UI**:
  - +/- æŒ‰é’®åˆ†é…/ç§»é™¤å·¥äºº
  - å®æ—¶æ˜¾ç¤ºèŒä¸šäººå£
  - é—²ç½®äººå£ç»Ÿè®¡

- [x] **é—²ç½®äººå£æ•ˆæœ**:
  - äº§å‡º"ç†å¿µ" (0.02/ç§’/äºº)
  - æ˜¾ç¤ºä¸º"é—²ç½® / æ€è€ƒè€…"

#### ç§‘æŠ€ç³»ç»Ÿ
- [x] **3 é¡¹ç§‘æŠ€**:
  1. **æ‰“åˆ¶çŸ³å™¨** (70 ç†å¿µ + 20 çŸ³æ–™)
     - è§£é”ç¢çŸ³å·¥èŒä¸š
     - æ‰‹åŠ¨é‡‡é›†çŸ³æ–™ç¿»å€

  2. **çŸ³æ–§** (200 ç†å¿µ + 50 æœ¨æ + 30 çŸ³æ–™)
     - æœ¨æäº§é‡ç¿»å€
     - æ‰‹åŠ¨ä¼æœ¨ç¿»å€

  3. **é•¿çŸ›** (180 ç†å¿µ + 40 æœ¨æ)
     - é£Ÿç‰©äº§é‡ 1.5 å€
     - æ¯›çš®æ‰è½ç‡ç¿»å€

  - [x] **ç§‘æŠ€æ ‘ UI**:
   - æ˜¾ç¤ºæˆæœ¬ä¸æ•ˆæœ
   - èµ„æºä¸è¶³æ—¶çº¢è‰²è­¦å‘Š
   - "å·²æŒæ¡"åˆ†åŒºå±•ç¤º

---

### âœ… Phase 1.6: é™·é˜±ä¸åŠ å·¥ (å·²å®Œæˆ)

#### è‡ªåŠ¨åŒ–å»ºç­‘
- [x] **é™·é˜±**:
  - è‡ªåŠ¨ç‹©çŒï¼ˆæ¯ tick 0.1% æˆåŠŸç‡/ä¸ªï¼‰
  - æ¯æ¬¡æˆåŠŸè·å¾— 1 ç”Ÿè‚‰ + 30% æ¦‚ç‡æ¯›çš®
  - è‡ªç„¶è¡°å‡ï¼šæ¯ tick 1% æŸåç‡
- [x] **æ™¾è‚‰æ¶**:
  - è‡ªåŠ¨å°†ç”Ÿè‚‰è½¬åŒ–ä¸ºè‚‰å¹²
  - å¤„ç†é€Ÿç‡ï¼š0.1 ç”Ÿè‚‰/ç§’/ä¸ª
  - å¢åŠ å­˜å‚¨ä¸Šé™ï¼šç”Ÿè‚‰ +30ï¼Œè‚‰å¹² +100

#### å¤šé£Ÿç‰©ç³»ç»Ÿ
- [x] **ç”Ÿè‚‰**: ç›´æ¥ç‹©çŒäº§å‡ºï¼Œæœ‰é™å­˜å‚¨ (30)
- [x] **è‚‰å¹²**: 5 å€é£Ÿç‰©ä»·å€¼ï¼Œé•¿æœŸå‚¨å­˜ (100)
- [x] **æ¶ˆè€—ä¼˜å…ˆçº§**: æµ†æœ â†’ ç”Ÿè‚‰ â†’ è‚‰å¹²ï¼ˆä»·å€¼æ¢ç®—ï¼‰

---

### âœ… Phase 1.7: éšæœºäº‹ä»¶ç³»ç»Ÿ (å·²å®Œæˆ)

#### äº‹ä»¶æ¶æ„
- [x] **äº‹ä»¶æ£€æŸ¥é—´éš”**: æ¯ 100 ticks (10 ç§’)
- [x] **å†·å´æœºåˆ¶**: åŸºäºæ—¶é—´æˆ³çš„ç‹¬ç«‹å†·å´
- [x] **ç¨€æœ‰åº¦ç³»ç»Ÿ**: Common (60%) / Uncommon (30%) / Rare (10%)
- [x] **äº‹ä»¶ç±»å‹**:
  - ResourceLoss: èµ„æºæŸå¤±
  - ResourceGain: èµ„æºè·å¾—
  - Wisdom: ç†å¿µè·å–
  - Debuff: ä¸´æ—¶å‡ç›Š
  - Special: ç‰¹æ®Šäº’åŠ¨åŠ¨ä½œ

#### å·²å®ç°äº‹ä»¶ (6 ä¸ª)
- [x] **é£Ÿç‰©è…çƒ‚** (Common, æ˜¥å­£):
  - æ¡ä»¶: é£Ÿç‰© > 200
  - æ•ˆæœ: æŸå¤± 10% å½“å‰é£Ÿç‰©
  - å†·å´: 30 ç§’

- [x] **æ„å¤–å‘ç°** (Uncommon, å…¨å­£èŠ‚):
  - æ¡ä»¶: æ— 
  - æ•ˆæœ: è·å¾— 30-50 æœ¨æ/çŸ³å¤´
  - å†·å´: 60 ç§’

- [x] **é•¿è€…çµæ„Ÿ** (Rare, å…¨å­£èŠ‚):
  - æ¡ä»¶: â‰¥1 é—²ç½®äººå£ + ç¯ç«ç‡ƒçƒ§
  - æ•ˆæœ: è·å¾— 50 ç†å¿µ
  - å†·å´: 90 ç§’

- [x] **æš´é£é›¨** (Uncommon, éå†¬å­£):
  - æ¡ä»¶: æ˜¥/å¤/ç§‹
  - æ•ˆæœ: ä¸´æ—¶ Debuff (+50% ç¯ç«æ¶ˆè€— 30 ç§’)
  - å†·å´: 120 ç§’

- [x] **ç¥ç§˜å›¾è…¾** (Rare, å…¨å­£èŠ‚):
  - æ¡ä»¶: æ‹¥æœ‰ç¢çŸ³å·¥
  - æœºåˆ¶: ç‰¹æ®ŠåŠ¨ä½œ "ç ”ç©¶å›¾è…¾" (20 ç§’)
  - å¥–åŠ±: 30 ç†å¿µ + 10 çŸ³å¤´
  - å†·å´: 150 ç§’

- [x] **å—ä¼¤çš„é‡å…½** (Uncommon, å†¬å­£):
  - æ¡ä»¶: å†¬å­£
  - æœºåˆ¶: ç‰¹æ®ŠåŠ¨ä½œ "è¿½è¸ªè¡€è¿¹" (15 ç§’)
  - å¥–åŠ±: 20 ç”Ÿè‚‰ + 5 æ¯›çš®
  - å†·å´: 80 ç§’

#### ç‰¹æ®ŠåŠ¨ä½œ UI
- [x] **åŠ¨ä½œæŒ‰é’®æ˜¾ç¤º**: åŠ¨æ€æ˜¾ç¤ºåœ¨ ActionPanel
- [x] **è¿›åº¦æ¡**: å¯è§†åŒ–å®Œæˆè¿›åº¦
- [x] **å€’è®¡æ—¶**: æ˜¾ç¤ºå‰©ä½™æ—¶é—´
- [x] **å®Œæˆ/æ”¾å¼ƒ**: è‡ªåŠ¨å®Œæˆæˆ–æ‰‹åŠ¨æ”¾å¼ƒ

#### Debuff ç³»ç»Ÿ
- [x] **ä¸´æ—¶æ•ˆæœæ•°ç»„**: `temporaryEffects`
- [x] **æ•ˆæœç±»å‹**:
  - bonfireConsumption: ç¯ç«æ¶ˆè€—å€ç‡
  - production: äº§å‡ºå€ç‡
  - consumption: æ¶ˆè€—å€ç‡
- [x] **è‡ªåŠ¨è¿‡æœŸ**: æ¯å¸§æ£€æŸ¥å¹¶ç§»é™¤è¿‡æœŸæ•ˆæœ
- [x] **ç¯ç«é›†æˆ**: è‡ªåŠ¨åº”ç”¨å€ç‡åˆ°ç‡ƒæ–™æ¶ˆè€—

---

### âœ… Phase 1.8: ç²¾ç¥æ–‡æ˜ - Sprint 3 (å·²å®Œæˆ)

#### æ–°èµ„æºç³»ç»Ÿ
- [x] **ä¼ ç»Ÿ**:
  - æè¿°: "éƒ¨è½çš„è®°å¿†ã€ä¿¡ä»°ä¸ä¸æˆæ–‡çš„å¾‹æ³•"
  - ç‰¹æ€§: Era 2 è§£é”æ ¸å¿ƒèµ„æºï¼Œä¸å¯æ‰‹åŠ¨é‡‡é›†
  - å­˜å‚¨ä¸Šé™: 1000

#### æ–°å»ºç­‘
- [x] **å›¾è…¾æŸ±**:
  - æˆæœ¬: 50 æœ¨æ + 20 çŸ³å¤´ + 100 ç†å¿µ
  - æ•ˆæœ: è‡ªåŠ¨äº§å‡ºä¼ ç»Ÿ (+0.05/ç§’/ä¸ª)
  - å»ºè®®ä¸Šé™: 5 ä¸ª (æˆæœ¬æŒ‡æ•°å¢é•¿ 1.8x)
  - åˆ†ç±»: æ–‡åŒ–å»ºç­‘
  - æè¿°: "é“­åˆ»ç€å…ˆç¥–çš„æ•…äº‹ï¼Œå‡èšéƒ¨è½çš„ç²¾ç¥"

- [x] **å¢“åœ°**:
  - æˆæœ¬: 100 çŸ³å¤´
  - æ•ˆæœ: **æ­»äº¡è½¬åŒ–æœºåˆ¶**
  - æ¯åæ—äººæ­»äº¡è·å¾— 50 ä¼ ç»Ÿ
  - åˆ†ç±»: æ–‡åŒ–å»ºç­‘
  - æè¿°: "æˆ‘ä»¬å°†é€è€…å½’è¿˜å¤§åœ°ï¼Œä½†ä»–ä»¬çš„æ™ºæ…§é•¿å­˜"

#### æ–°åŠ¨ä½œ
- [x] **ç››å¤§ç¥­å…¸**:
  - ä½ç½®: ActionPanel
  - æˆæœ¬: 500 æµ†æœ + 100 æœ¨æ + 50 è‚‰å¹²
  - æ•ˆæœ: ç¬é—´è·å¾— 100 ä¼ ç»Ÿ
  - å†·å´: 300 ç§’ (5 åˆ†é’Ÿ)
  - æ—¥å¿—: é‡‘è‰²åº†ç¥æ¶ˆæ¯
  - ç›®çš„: åæœŸèµ„æºå›æ”¶ï¼Œè¿«ä½¿æå‡å­˜å‚¨ä¸Šé™

#### æ­»äº¡è½¬åŒ–æœºåˆ¶
- [x] **é¥¥é¥¿æ­»äº¡è½¬åŒ–**:
  - æ¡ä»¶: æ‹¥æœ‰å¢“åœ°
  - æ•ˆæœ: æ¯æ­»äº¡ 1 äºº â†’ +50 ä¼ ç»Ÿ
  - æ—¥å¿—: "ä¸€åæ—äººç¦»ä¸–äº†ï¼Œä½†ä»–çš„ç²¾ç¥åŠ å…¥äº†ä¼ ç»Ÿ"

- [x] **å¯’å†·æ­»äº¡è½¬åŒ–**:
  - æ¡ä»¶: å†¬å­£ + æ‹¥æœ‰å¢“åœ°
  - æ•ˆæœ: æ¯æ­»äº¡ 1 äºº â†’ +50 ä¼ ç»Ÿ
  - æ—¥å¿—: åŒä¸Š

#### ä¼ ç»Ÿèµ„æºè·å–æ–¹å¼
1. **å›¾è…¾æŸ±**: è¢«åŠ¨äº§å‡º (0.05/ç§’/ä¸ª)
2. **ç››å¤§ç¥­å…¸**: ä¸»åŠ¨è·å– (100 ä¼ ç»Ÿ/æ¬¡ï¼Œ5 åˆ†é’Ÿ CD)
3. **æ­»äº¡è½¬åŒ–**: è¡¥å¿æœºåˆ¶ (50 ä¼ ç»Ÿ/äºº)

---

### âœ… Phase 1.9: èƒœåˆ©æ¡ä»¶ä¸æŒä¹…åŒ– (å·²å®Œæˆ)

#### èƒœåˆ©æ¡ä»¶
- [x] **éƒ¨è½å¤§å…**:
  - æˆæœ¬: 2000 æœ¨æ + 1000 çŸ³å¤´ + 500 ä¼ ç»Ÿ + 1000 ç†å¿µ
  - æ•ˆæœ: å®Œæˆéƒ¨è½æ—¶ä»£ï¼Œæ˜¾ç¤ºèƒœåˆ©å¼¹çª—
  - é™åˆ¶: æœ€å¤šå»ºé€  1 ä¸ª
  - åˆ†ç±»: å¥‡è¿¹å»ºç­‘
  - æè¿°: "ç»Ÿä¸€å„ä¸ªæ°æ—ï¼Œæˆ‘ä»¬å°†ä¸å†æµæµªã€‚è¿™æ˜¯æ–‡æ˜çš„åŸºçŸ³ã€‚"

#### æŒä¹…åŒ–ç³»ç»Ÿ
- [x] **è‡ªåŠ¨ä¿å­˜**:
  - ä½¿ç”¨ Zustand persist ä¸­é—´ä»¶
  - è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ¸¸æˆçŠ¶æ€åˆ° localStorage
  - ä¿å­˜é”®: 'civ-odyssey-save'
  - ç‰ˆæœ¬æ§åˆ¶: v1 (æ”¯æŒæœªæ¥è¿ç§»)

- [x] **Decimal.js é‡æ–°æ°´åˆ**:
  - è‡ªå®šä¹‰åˆå¹¶å‡½æ•°: `deepMergeAndRehydrate`
  - ç¡®ä¿ Decimal å®ä¾‹æ­£ç¡®æ¢å¤
  - é˜²æ­¢åºåˆ—åŒ–ä¸¢å¤±ç±»å‹ä¿¡æ¯
  - æ–‡ä»¶: `src/utils/persistence.ts`

- [x] **é‡ç½®å­˜æ¡£**:
  - å¯¼å‡ºåŠ¨ä½œ: `gameActions.resetSave()`
  - æ¸…é™¤ localStorage å¹¶åˆ·æ–°é¡µé¢
  - ç”¨äºæµ‹è¯•æˆ–é‡æ–°å¼€å§‹æ¸¸æˆ

#### èƒœåˆ©å¼¹çª—
- [x] **VictoryModal ç»„ä»¶**:
  - æ–‡ä»¶: `src/components/VictoryModal.tsx`
  - è§¦å‘æ¡ä»¶: å»ºé€ ç¬¬ä¸€ä¸ªéƒ¨è½å¤§å…
  - æ˜¾ç¤ºå†…å®¹:
    - æ ‡é¢˜: "æ–‡æ˜çš„é»æ˜"
    - ç»Ÿè®¡: ç”Ÿå­˜å¤©æ•°ã€æ€»äººå£ã€ç ”ç©¶ç§‘æŠ€
    - é€‰é¡¹: ç»§ç»­ç•™åœ¨éƒ¨è½ / è¿›å…¥ç‹å›½æ—¶ä»£

#### UI æ›´æ–°
- [x] **BuildingsPanel**:
  - æ–°å¢"å¥‡è¿¹å»ºç­‘"åˆ†ç±»
  - éƒ¨è½å¤§å… (Scroll å›¾æ ‡)
  - ç†å¿µæˆæœ¬æ£€æŸ¥
  - å¥‡è¿¹å»ºç­‘é™åˆ¶æ˜¾ç¤º

- [x] **VictoryModal**:
  - é‡‘è‰²æ¸å˜ä¸»é¢˜
  - å‘å…‰æ•ˆæœ (backdrop-blur, ring)
  - ä¸¤ä¸ªæŒ‰é’®: ç»§ç»­éƒ¨è½ / è¿›å…¥ç‹å›½
  - æ˜¾ç¤ºæ¸¸æˆç»Ÿè®¡æ•°æ®

#### æ¸¸æˆé€»è¾‘æ›´æ–°
1. **éƒ¨è½å¤§å…å»ºé€ é€»è¾‘** (buildingsSlice.ts):
   ```typescript
   // æ£€æŸ¥æ˜¯å¦ä¸ºå¥‡è¿¹å»ºç­‘
   if (config.category === 'wonder' && building.count.gte(1)) {
     return state; // æœ€å¤šå»ºé€  1 ä¸ª
   }

   // è§¦å‘èƒœåˆ©æ£€æŸ¥
   if (isTribalHall && isFirstTribalHall) {
     set((s) => ({
       isEraCompleted: true,
       isPaused: true,
     }));
     addLog('éƒ¨è½æ—¶ä»£å·²å®Œæˆï¼éƒ¨è½å¤§å…å·²å»ºæˆï¼Œæ–‡æ˜çš„æ–°ç¯‡ç« å³å°†å¼€å§‹ã€‚', 'success');
   }
   ```

2. **æŒä¹…åŒ–é…ç½®** (useGameStore.ts):
   ```typescript
   persist(
     (set, get, api) => ({ /* slices */ }),
     {
       name: 'civ-odyssey-save',
       storage: createJSONStorage(() => localStorage),
       merge: (persistedState: any, currentState) => {
         return deepMergeAndRehydrate(persistedState, currentState);
       },
       version: 1,
     }
   )
   ```

3. **Decimal.js é‡æ–°æ°´åˆ** (persistence.ts):
   ```typescript
   function deepMergeAndRehydrate<T>(persistedState: any, initialState: T): T {
     // é€’å½’åˆå¹¶çŠ¶æ€
     // æ¢å¤ Decimal å®ä¾‹
     // è·³è¿‡ undefined å€¼
   }
   ```

#### ç±»å‹ç³»ç»Ÿæ›´æ–°
1. **BuildingType**:
   - æ–°å¢ `TribalHall = 'tribalHall'`

2. **GameSliceState**:
   - æ–°å¢ `isEraCompleted: boolean`

3. **EventSliceState**:
   - æ–°å¢ `activeSpecialAction` (ç”¨äºç‰¹æ®ŠåŠ¨ä½œçŠ¶æ€ç®¡ç†)

#### æŠ€æœ¯å€ºåŠ¡ä¿®å¤
1. **tick.ts**:
   - ç§»é™¤å¤šä½™çš„é—­åˆæ‹¬å·

2. **LogPanel.tsx**:
   - ä¿®å¤ isMounted å˜é‡å‘½å
   - é¿å…ä¸ React useRef å†²çª

3. **useGameLoop.ts**:
   - æ”¹è¿›é¦–å¸§å¤„ç†é€»è¾‘
   - æ·»åŠ æ¯ 100 tick æ—¥å¿—
   - ç§»é™¤ return è¯­å¥ï¼Œæ”¹ä¸ºç«‹å³è°ƒåº¦ä¸‹ä¸€å¸§

#### UI æ›´æ–°
- [x] **ResourcePanel**:
  - æ–°å¢"ä¼ ç»Ÿ"èµ„æºå¡ç‰‡
  - é»„è‰²ä¸»é¢˜é…è‰² (Scroll å›¾æ ‡)
  - å­˜å‚¨è¿›åº¦æ¡å’Œè­¦å‘Š

- [x] **BuildingsPanel**:
  - æ–°å¢"æ–‡åŒ–å»ºç­‘"åˆ†ç±»
  - é»„è‰²/é‡‘è‰²ä¸»é¢˜
  - å›¾è…¾æŸ± (Scroll å›¾æ ‡)
  - å¢“åœ° (Skull å›¾æ ‡)
  - æ”¯æŒç†å¿µæˆæœ¬æ£€æŸ¥

- [x] **ActionPanel**:
  - ç››å¤§ç¥­å…¸æŒ‰é’®: é‡‘è‰²æ¸å˜
  - Sparkles å›¾æ ‡
  - å¤šèµ„æºæ¶ˆè€—éªŒè¯
  - 5 åˆ†é’Ÿå†·å´æ˜¾ç¤º

---

## 3. æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
```typescript
- æ¡†æ¶: React 19 + Vite
- è¯­è¨€: TypeScript 5.x
- æ ·å¼: Tailwind CSS
- çŠ¶æ€ç®¡ç†: Zustand (Slice æ¨¡å¼)
- æ•°å€¼è®¡ç®—: Decimal.js
- å›¾æ ‡: Lucide React
```

### é¡¹ç›®ç»“æ„
```
src/
 â”œâ”€â”€ components/          # UI ç»„ä»¶
 â”‚   â”œâ”€â”€ ActionPanel.tsx          # æ‰‹åŠ¨æ“ä½œ
 â”‚   â”œâ”€â”€ BonfirePanel.tsx         # ç¯ç«ç®¡ç†
 â”‚   â”œâ”€â”€ BuildingsPanel.tsx       # å»ºé€ ç³»ç»Ÿ
 â”‚   â”œâ”€â”€ FoodStatusPanel.tsx      # é£Ÿç‰©å¹³è¡¡
 â”‚   â”œâ”€â”€ LogPanel.tsx             # æ—¥å¿—çª—å£
 â”‚   â”œâ”€â”€ PopulationInfo.tsx       # äººå£ä¿¡æ¯
 â”‚   â”œâ”€â”€ ResourcePanel.tsx        # èµ„æºæ˜¾ç¤º
 â”‚   â”œâ”€â”€ SeasonDisplay.tsx        # å­£èŠ‚è¿›åº¦
 â”‚   â”œâ”€â”€ TribalManagementPanel.tsx # èŒä¸šåˆ†é…
 â”‚   â””â”€â”€ TechTreePanel.tsx        # ç§‘æŠ€æ ‘
 â”‚
 â”œâ”€â”€ store/
 â”‚   â”œâ”€â”€ slices/          # Zustand åˆ‡ç‰‡
 â”‚   â”‚   â”œâ”€â”€ resourceSlice.ts    # èµ„æºç®¡ç†
 â”‚   â”‚   â”œâ”€â”€ seasonSlice.ts      # å­£èŠ‚ç³»ç»Ÿ
 â”‚   â”‚   â”œâ”€â”€ populationSlice.ts  # äººå£é€»è¾‘
 â”‚   â”‚   â”œâ”€â”€ bonfireSlice.ts     # ç¯ç«ç³»ç»Ÿ
 â”‚   â”‚   â”œâ”€â”€ buildingsSlice.ts   # å»ºé€ ç³»ç»Ÿ
 â”‚   â”‚   â”œâ”€â”€ tribeSlice.ts       # èŒä¸šç³»ç»Ÿ
 â”‚   â”‚   â”œâ”€â”€ techSlice.ts        # ç§‘æŠ€ç³»ç»Ÿ
 â”‚   â”‚   â”œâ”€â”€ logSlice.ts         # æ—¥å¿—ç³»ç»Ÿ
 â”‚   â”‚   â”œâ”€â”€ scoutingSlice.ts    # æ¢ç´¢ç³»ç»Ÿ
 â”‚   â”‚   â””â”€â”€ eventSlice.ts      # éšæœºäº‹ä»¶ç³»ç»Ÿ
 â”‚   â”œâ”€â”€ useGameStore.ts         # Store ç»„åˆ
 â”‚   â””â”€â”€ types.ts                # ç±»å‹å®šä¹‰
 â”‚
 â”œâ”€â”€ game/
 â”‚   â””â”€â”€ tick.ts                 # æ¸¸æˆä¸»å¾ªç¯
 â”‚
 â”œâ”€â”€ types/
 â”‚   â””â”€â”€ game.ts                 # æ¸¸æˆç±»å‹å®šä¹‰
 â”‚
 â””â”€â”€ hooks/
     â””â”€â”€ useGameLoop.ts          # æ¸¸æˆå¾ªç¯ Hook
 ```

### æ ¸å¿ƒè®¾è®¡æ¨¡å¼

#### 1. Slice æ¨¡å¼ (Zustand)
æ¯ä¸ªç³»ç»Ÿç‹¬ç«‹ç®¡ç†ï¼Œé€šè¿‡ `useGameStore` ç»„åˆï¼š
```typescript
export const useGameStore = create<GameStore>()((set, get, api) => ({
  ...createResourceSlice(set, get, api),
  ...createSeasonSlice(set, get, api),
  ...createTribeSlice(set, get, api),
  // ...
}));
```

#### 2. å›ºå®šæ—¶é—´æ­¥é•¿ (Fixed Time Step)
```typescript
const FPS = 10; // 10 TPS
const tickRate = 1000 / FPS; // 100ms per tick

setInterval(() => {
  gameTick(); // ç²¾ç¡®æ§åˆ¶æ¸¸æˆé€»è¾‘
}, tickRate);
```

#### 3. Decimal.js ç²¾ç¡®è®¡ç®—
```typescript
// âŒ ç¦æ­¢: JS Number
const result = 0.1 + 0.2; // 0.30000000000000004

// âœ… æ­£ç¡®: Decimal.js
const result = new Decimal(0.1).plus(0.2); // 0.3
```

#### 4. è½®è¯¢æ¶æ„ (Polling)
UI ç»„ä»¶æ¯ 200ms è½®è¯¢ Store çŠ¶æ€ï¼š
```typescript
useEffect(() => {
  const interval = setInterval(() => {
    const state = useGameStore.getState();
    setResource(state.resources.food);
  }, 200);
  return () => clearInterval(interval);
}, []);
```

---

## 4. æ¸¸æˆç³»ç»Ÿè¯¦è§£

### 4.1 å­£èŠ‚ç³»ç»Ÿ

#### å­£èŠ‚å¾ªç¯
```
æ˜¥ (10å¤©) â†’ å¤ (10å¤©) â†’ ç§‹ (10å¤©) â†’ å†¬ (10å¤©) â†’ å¾ªç¯
```

#### äº§å‡ºä¿®æ­£
| å­£èŠ‚ | é£Ÿç‰©ä¿®æ­£ | æœ¨æä¿®æ­£ | å¤‡æ³¨ |
|------|----------|----------|------|
| æ˜¥ | 1.5x | 1.5x | ä¸‡ç‰©å¤è‹ |
| å¤ | 1.5x | 1.5x | äº§å‡ºé«˜å³° |
| ç§‹ | 1.0x | 1.0x | æœ€åå‚¨å¤‡æœŸ |
| å†¬ | 0.1x | 1.0x | ä¸¥é…·å¯’å†¬ |

#### æ¶ˆè€—ä¿®æ­£
| å­£èŠ‚ | åŸºç¡€æ¶ˆè€— | ç¯ç« | è¡£ç‰© | æœ€ç»ˆ |
|------|----------|------|------|------|
| æ˜¥/å¤ | 1.0x | - | - | 1.0x |
| ç§‹ | 1.0x | - | - | 1.1x |
| å†¬ (æœ€ç³Ÿ) | 2.0x | -0.5 | -0.3 | 2.0x |
| å†¬ (æœ‰ç«) | 2.0x | -0.5 | - | 1.5x |
| å†¬ (ç«+çš®) | 2.0x | -0.5 | -0.3 | 1.2x |

### 4.2 ç¯ç«ç³»ç»Ÿ

#### çŠ¶æ€æœº
```
ç‡ƒçƒ§ (æ­£å¸¸) â†’ ä½ç‡ƒæ–™ (<30) â†’ ç†„ç­ (0)
     â†‘            â†“               â†“
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åŠ æŸ´ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç‡ƒæ–™æ¶ˆè€—
```typescript
åŸºç¡€æ¶ˆè€—: 0.1 æœ¨æ/åˆ» (1.0/ç§’)
å†¬å­£æ¶ˆè€—: 0.2 æœ¨æ/åˆ» (2.0/ç§’)
æœ€å¤§ç‡ƒæ–™: 100
```

#### æ•ˆç‡æƒ©ç½š
```typescript
if (ç¯ç«ç†„ç­) {
  æ‰€æœ‰èµ„æºäº§å‡º *= 0.1; // 90% æƒ©ç½š
  ç†å¿µäº§å‡º *= 0.5; // 50% æƒ©ç½š
}
```

### 4.3 èŒä¸šç³»ç»Ÿ

#### èŒä¸šäº§å‡º
| èŒä¸š | äº§å‡º/ç§’ | è§£é”æ¡ä»¶ | å¤‡æ³¨ |
|------|---------|----------|------|
| é‡‡é›†è€… | 3.0 é£Ÿç‰© | é»˜è®¤ | é»„é‡‘æ¯”ä¾‹ 1:3 |
| ä¼æœ¨å·¥ | 0.5 æœ¨æ | é»˜è®¤ | 2äºº=1ç¯ç« |
| ç¢çŸ³å·¥ | 0.1 çŸ³æ–™ | æ‰“åˆ¶çŸ³å™¨ | éœ€ç§‘æŠ€è§£é” |
| æ€è€ƒè€… | 0.02 ç†å¿µ | é—²ç½® | è‡ªåŠ¨äº§å‡º |

#### ç§‘æŠ€åŠ æˆ
```typescript
// çŸ³æ–§ç§‘æŠ€
if (å·²ç ”ç©¶çŸ³æ–§) {
  ä¼æœ¨å·¥äº§å‡º *= 2.0;
  æ‰‹åŠ¨ä¼æœ¨ *= 2.0;
}

// é•¿çŸ›ç§‘æŠ€
if (å·²ç ”ç©¶é•¿çŸ›) {
  é‡‡é›†è€…äº§å‡º *= 1.5;
  æ‰‹åŠ¨é‡‡é›† *= 1.5;
  æ¯›çš®æ‰è½ç‡ *= 2.0;
}
```

### 4.4 ç§‘æŠ€ç³»ç»Ÿ

 #### ç§‘æŠ€æ ‘
 ```
 æ‰“åˆ¶çŸ³å™¨ (70ç†å¿µ + 20çŸ³æ–™)
   â†“
   â”œâ†’ è§£é”ç¢çŸ³å·¥
   â””â†’ æ‰‹åŠ¨é‡‡çŸ³ x2

 çŸ³æ–§ (200ç†å¿µ + 50æœ¨æ + 30çŸ³æ–™)
   â†“
   â”œâ†’ ä¼æœ¨å·¥ x2
   â””â†’ æ‰‹åŠ¨ä¼æœ¨ x2

 é•¿çŸ› (180ç†å¿µ + 40æœ¨æ)
   â†“
   â”œâ†’ é‡‡é›†è€… x1.5
   â”œâ†’ æ‰‹åŠ¨é‡‡é›† x1.5
   â””â†’ æ¯›çš®æ‰è½ç‡ x2
 ```

### 4.6 ä¼ ç»Ÿèµ„æºç³»ç»Ÿ (Sprint 3)

#### ä¼ ç»Ÿèµ„æº
- **å®šä¹‰**: "éƒ¨è½çš„è®°å¿†ã€ä¿¡ä»°ä¸ä¸æˆæ–‡çš„å¾‹æ³•"
- **è·å–æ–¹å¼**:
  1. å›¾è…¾æŸ±ï¼šè‡ªåŠ¨äº§å‡º (+0.05 ä¼ ç»Ÿ/ç§’/ä¸ª)
  2. ç››å¤§ç¥­å…¸ï¼šä¸»åŠ¨è·å– (100 ä¼ ç»Ÿ/æ¬¡)
  3. æ­»äº¡è½¬åŒ–ï¼šè¡¥å¿æœºåˆ¶ (50 ä¼ ç»Ÿ/äºº)

- **å­˜å‚¨ä¸Šé™**: 1000
- **è§£é”ç”¨é€”**: Era 2 (ç‹å›½æ—¶ä»£) è¿›å…¥

#### æ–‡åŒ–å»ºç­‘
| å»ºç­‘ | æˆæœ¬ | æ•ˆæœ | åˆ†ç±» |
|------|------|------|------|
| å›¾è…¾æŸ± | 50 æœ¨æ + 20 çŸ³å¤´ + 100 ç†å¿µ | +0.05 ä¼ ç»Ÿ/ç§’/ä¸ª | æ–‡åŒ– |
| å¢“åœ° | 100 çŸ³å¤´ | æ­»äº¡è½¬åŒ–: 50 ä¼ ç»Ÿ/äºº | æ–‡åŒ– |

#### ç››å¤§ç¥­å…¸
- **æˆæœ¬**: 500 æµ†æœ + 100 æœ¨æ + 50 è‚‰å¹²
- **æ•ˆæœ**: ç¬é—´è·å¾— 100 ä¼ ç»Ÿ
- **å†·å´**: 300 ç§’ (5 åˆ†é’Ÿ)
- **ç›®çš„**: åæœŸèµ„æºå›æ”¶ï¼Œè¿«ä½¿æå‡å­˜å‚¨ä¸Šé™

#### æ­»äº¡è½¬åŒ–æœºåˆ¶
```typescript
// é¥¥é¥¿/å¯’å†·æ­»äº¡æ—¶
if (æ‹¥æœ‰å¢“åœ°) {
  ä¼ ç»Ÿ += æ­»äº¡äººæ•° Ã— 50;
  æ—¥å¿—: "ä¸€åæ—äººç¦»ä¸–äº†ï¼Œä½†ä»–çš„ç²¾ç¥åŠ å…¥äº†ä¼ ç»Ÿ";
}
```

#### ä¼ ç»Ÿèµ„æºå¹³è¡¡
| æ–¹å¼ | æ•°å€¼ | é¢‘ç‡ | ç›®çš„ |
|------|------|------|------|
| å›¾è…¾æŸ±äº§å‡º | 0.05/ç§’/ä¸ª | è¢«åŠ¨ | æ…¢é€Ÿç§¯ç´¯ |
| ç››å¤§ç¥­å…¸ | 100 ä¼ ç»Ÿ | 5 åˆ†é’Ÿ CD | å¤§é¢è·å– |
| æ­»äº¡è½¬åŒ– | 50 ä¼ ç»Ÿ/äºº | è§¦å‘å¼ | é™ä½æŒ«è´¥æ„Ÿ |

---

 ## 5. å¹³è¡¡æ€§æ¨¡å‹

### 5.1 æ ¸å¿ƒæ•°å€¼

#### èµ„æºäº§å‡ºç‡
```typescript
// èŒä¸šäº§å‡º (æ¯ç§’)
GATHERER_BASE_RATE = 3.0    // é‡‡é›†è€…
WOODCUTTER_BASE_RATE = 0.5  // ä¼æœ¨å·¥
STONECUTTER_BASE_RATE = 0.1 // ç¢çŸ³å·¥

// é—²ç½®äº§å‡º (æ¯ç§’)
IDEAS_PER_IDLE_SETTLER = 0.02

// ä¼ ç»Ÿäº§å‡º (æ¯ç§’)
TRADITION_PER_TOTEM_POLE = 0.05 // æ¯ä¸ªå›¾è…¾æŸ±
```

#### èµ„æºæ¶ˆè€—ç‡
```typescript
// äººå£æ¶ˆè€— (æ¯ç§’)
FOOD_PER_PERSON = 1.0  // åŸºç¡€
WINTER_MULTIPLIER = 2.0 // å†¬å­£

// ç¯ç«æ¶ˆè€— (æ¯ç§’)
BONFIRE_CONSUMPTION = 1.0  // æ˜¥/å¤/ç§‹
BONFIRE_WINTER = 2.0       // å†¬å­£

// ç››å¤§ç¥­å…¸å†·å´
GRAND_FESTIVAL_COOLDOWN = 300000 // 5 åˆ†é’Ÿ (æ¯«ç§’)
```

### 5.2 æ¸¸æˆèŠ‚å¥

#### å‰æœŸèŠ‚å¥ (0-10 åˆ†é’Ÿ)
- [x] åˆå§‹ 5 äººå£ + 50 æµ†æœ
- [x] åˆ†é… 2 é‡‡é›†è€… â†’ å‡€ +1.0 é£Ÿç‰©/ç§’
- [x] æ‰‹åŠ¨é‡‡é›†è¿‡æ¸¡
- [x] ç›®æ ‡ï¼šå­˜æ´»è¿‡ç¬¬ä¸€ä¸ªå†¬å¤©

#### ä¸­æœŸèŠ‚å¥ (10-30 åˆ†é’Ÿ)
- [x] äººå£å¢é•¿è‡³ 10-15
- [x] è§£é”ç¬¬ä¸€ä¸ªç§‘æŠ€ (æ‰“åˆ¶çŸ³å™¨)
- [x] å»ºé€ ç²®ä»“/æœ¨æåœº
- [x] ç›®æ ‡ï¼šå»ºç«‹ç¨³å®šé£Ÿç‰©å¾ªç¯

#### åæœŸèŠ‚å¥ (30+ åˆ†é’Ÿ)
- [x] ç ”ç©¶æ‰€æœ‰ç§‘æŠ€
- [x] äººå£å¢é•¿è‡³ 20+
- [x] æ¢ç´¢è’é‡å¯»æ‰¾å¹¸å­˜è€…
- [x] ç›®æ ‡ï¼šè¾¾æˆäººå£ä¸Šé™

---

## 6. åŸºç¡€ç‰¢é æ€§åˆ†æ

### âœ… å·²éªŒè¯çš„åšå®åŸºç¡€

#### 1. æ•°å€¼ç³»ç»Ÿ â­â­â­â­â­
**çŠ¶æ€**: å®Œå…¨ç‰¢é 
- Decimal.js å…¨è¦†ç›–
- æ— æµ®ç‚¹è¯¯å·®
- æ”¯æŒæå¤§æ•°å€¼ï¼ˆæœªæ¥æ‰©å±•ï¼‰
- **ç»“è®º**: å¯ä½œä¸º Era 2-4 çš„åŸºç¡€

#### 2. çŠ¶æ€ç®¡ç† â­â­â­â­â­
**çŠ¶æ€**: å®Œå…¨ç‰¢é 
- Slice æ¨¡å¼è§£è€¦å®Œç¾
- æ˜“äºæ·»åŠ æ–°ç³»ç»Ÿ
- ç±»å‹å®‰å…¨
- **ç»“è®º**: å¯ç›´æ¥æ‰©å±•è‡³ Era 2

#### 3. æ¸¸æˆå¾ªç¯ â­â­â­â­â­
**çŠ¶æ€**: å®Œå…¨ç‰¢é 
- å›ºå®šæ—¶é—´æ­¥é•¿ç²¾ç¡®
- æš‚åœ/åŠ é€ŸåŠŸèƒ½å®Œå–„
- Tick é€»è¾‘æ¸…æ™°
- **ç»“è®º**: å¯æ”¯æŒæ›´å¤æ‚çš„ç³»ç»Ÿ

#### 4. UI æ¶æ„ â­â­â­â­
**çŠ¶æ€**: è‰¯å¥½ï¼Œæœ‰æ”¹è¿›ç©ºé—´
- å“åº”å¼å¸ƒå±€å®Œå–„
- è½®è¯¢æœºåˆ¶ç¨³å®š
- æ·±è‰²æ¨¡å¼å®Œæ•´
- **æ½œåœ¨é—®é¢˜**: é¢æ¿è¿‡å¤šå¯¼è‡´ç•Œé¢æ‹¥æŒ¤
- **å»ºè®®**: Era 2 è€ƒè™‘æ ‡ç­¾é¡µ (Tab) ç³»ç»Ÿ

#### 5. å­£èŠ‚ç³»ç»Ÿ â­â­â­â­â­
**çŠ¶æ€**: å®Œå…¨ç‰¢é 
- æ ¸å¿ƒå¾ªç¯ç¨³å®š
- æƒ©ç½šæœºåˆ¶åˆç†
- **ç»“è®º**: å¯ä½œä¸º Era 1 æ ‡å¿—æ€§æœºåˆ¶

### âš ï¸ éœ€è¦å·©å›ºçš„éƒ¨åˆ†

#### 1. å¹³è¡¡æ€§ â­â­â­
**çŠ¶æ€**: åŸºæœ¬å¹³è¡¡ï¼Œéœ€è¦è°ƒä¼˜
- âœ… é»„é‡‘æ¯”ä¾‹åˆç† (1:3)
- âš ï¸ å†¬å­£å¯èƒ½è¿‡éš¾ (2.0x æ¶ˆè€—)
- âš ï¸ ç§‘æŠ€æˆæœ¬éœ€è¦æµ‹è¯•
- **å»ºè®®**: å¢åŠ éš¾åº¦é€‰æ‹© (ç®€å•/æ™®é€š/å›°éš¾)

#### 2. æ—©æœŸæ¸¸æˆä½“éªŒ â­â­â­
**çŠ¶æ€**: å¯ç©ï¼Œä½†å¼•å¯¼ä¸è¶³
- âŒ æ— æ–°æ‰‹æ•™ç¨‹
- âŒ æ— ç›®æ ‡æç¤º
- âŒ å¤±è´¥åé¦ˆä¸æ˜æ˜¾
- **å»ºè®®**: æ·»åŠ "ä»»åŠ¡ç³»ç»Ÿ"å¼•å¯¼ç©å®¶

#### 3. åæœŸå†…å®¹ â­â­
**çŠ¶æ€**: ä¸è¶³
- âŒ ç ”ç©¶å®Œæ‰€æœ‰ç§‘æŠ€åç›®æ ‡ç¼ºå¤±
- âŒ æ— é•¿æœŸç›®æ ‡ (äººå£ 100+?)
- **å»ºè®®**: æ·»åŠ é‡Œç¨‹ç¢‘ç³»ç»Ÿ

### ğŸ”§ æŠ€æœ¯å€ºåŠ¡

#### 1. æµ‹è¯•è¦†ç›–
**å½“å‰**: 0% è‡ªåŠ¨æµ‹è¯•
**å»ºè®®**: è‡³å°‘æ·»åŠ æ ¸å¿ƒè®¡ç®—çš„å•å…ƒæµ‹è¯•
```typescript
describe('Food Consumption', () => {
  it('should calculate winter consumption correctly', () => {
    // ...
  });
});
```

#### 2. æ€§èƒ½ä¼˜åŒ–
**å½“å‰**: 200ms è½®è¯¢å¯èƒ½æµªè´¹
**å»ºè®®**: è€ƒè™‘ä½¿ç”¨ Zustand è®¢é˜…
```typescript
// æ›¿ä»£è½®è¯¢
const food = useGameStore(state => state.resources.food);
```

#### 3. é”™è¯¯å¤„ç†
**å½“å‰**: try-catch å¿½ç•¥é”™è¯¯
**å»ºè®®**: æ·»åŠ å…¨å±€é”™è¯¯è¾¹ç•Œ
```typescript
<ErrorBoundary>
  <App />
</ErrorBoundary>
```

---

## 7. ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

### Phase 1.6: ä¼˜åŒ–ä¸æ‰“ç£¨ (å½“å‰ä¼˜å…ˆçº§)

#### ç”¨æˆ·ä½“éªŒ
- [ ] **æ–°æ‰‹æ•™ç¨‹**: å¼•å¯¼ç©å®¶é¦–æ¬¡æ¸¸æˆ
- [ ] **ä»»åŠ¡ç³»ç»Ÿ**: çŸ­æœŸç›®æ ‡ (å­˜æ´» 1 å¹´/äººå£ 10/ç ”ç©¶ç§‘æŠ€)
- [ ] **æˆå°±ç³»ç»Ÿ**: é•¿æœŸç›®æ ‡
- [ ] **éŸ³æ•ˆ**: å­£èŠ‚åˆ‡æ¢/æŒ‰é’®ç‚¹å‡»

#### å¹³è¡¡æ€§è°ƒæ•´
- [ ] **éš¾åº¦é€‰æ‹©**: ç®€å•/æ™®é€š/å›°éš¾
- [ ] **æ•°å€¼å¾®è°ƒ**: æ ¹æ®ç©å®¶åé¦ˆè°ƒæ•´
- [ ] **å­£èŠ‚æ•°å€¼**: å¯èƒ½é™ä½å†¬å­£æƒ©ç½š

#### UI æ”¹è¿›
- [ ] **æ ‡ç­¾é¡µç³»ç»Ÿ**: ç»„ç»‡è¿‡å¤šé¢æ¿
- [ ] **å·¥å…·æç¤º**: æ‚¬åœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- [ ] **è®¾ç½®é¢æ¿**: æ¸¸æˆé€Ÿåº¦/éŸ³é‡/ä¸»é¢˜

---

### Phase 1.7: å†…å®¹æ‰©å±• (çŸ­æœŸ)

#### æ–°å»ºç­‘
- [ ] **é™·é˜±**: è‡ªåŠ¨ç‹©çŒ
- [ ] **æ™¾è‚‰æ¶**: é£Ÿç‰©å‚¨å­˜å‡çº§
- [ ] **é›†ä¼šæ‰€**: ç†å¿µäº§å‡ºåŠ æˆ

#### æ–°ç§‘æŠ€
- [ ] **å¼“ç®­**: ç‹©çŒæ•ˆç‡æå‡
- [ ] **å†œä¸š**: è§£é”å†œç”°
- [ ] **å‚¨å­˜æŠ€æœ¯**: æ‰€æœ‰å­˜å‚¨ä¸Šé™ +50%

#### æ–°æœºåˆ¶
- [ ] **äº‹ä»¶ç³»ç»Ÿ**: éšæœºäº‹ä»¶ (ç‹¼ç¾¤è¢­å‡»/å‘ç°æµ†æœä¸›)
- [ ] **äº¤æ˜“**: ä¸æµæµªå•†äººäº¤æ˜“
- [ ] **å¤©èµ‹ç³»ç»Ÿ**: æ¯æ¬¡å‡çº§é€‰æ‹©åŠ æˆ

---

### Phase 2.0: ç‹å›½æ—¶ä»£ (ä¸­æœŸï¼Œ1-2ä¸ªæœˆ)

#### æ ¸å¿ƒå˜æ›´
- [ ] **æ”¿æ²»ç³»ç»Ÿ**: éƒ¨è½ â†’ ç‹å›½è½¬å‹
- [ ] **å¹¸ç¦åº¦**: æ–°èµ„æºç±»å‹
- [ ] **ç¨æ”¶ç³»ç»Ÿ**: å¯è°ƒèŠ‚ç¨ç‡
- [ ] **æ”¿ç­–æ ‘**: 3-5 æ¡åˆ†æ”¯

#### æ–°èµ„æº
- [ ] **é»„é‡‘**: è´§å¸ç³»ç»Ÿ
- [ ] **çŸ¿çŸ³**: å†›äº‹å»ºç­‘éœ€è¦
- [ ] **å¹¸ç¦åº¦**: æ ¸å¿ƒé™åˆ¶èµ„æº

#### æ–°å»ºç­‘
- [ ] **æˆ¿å±‹**: æä¾›å¹¸ç¦åº¦
- [ ] **å¸‚åœº**: äº¤æ˜“èµ„æº
- [ ] **å…µè¥**: è®­ç»ƒå†›é˜Ÿ
- [ ] **å›¾ä¹¦é¦†**: äº§ç”Ÿç§‘æŠ€ç‚¹

#### UI å˜æ›´
- [ ] **æ”¿ç­–é¢æ¿**: æ»‘å—è°ƒèŠ‚ç¨ç‡
- [ ] **å¹¸ç¦åº¦é¢æ¿**: æ˜¾ç¤ºæ»¡æ„åº¦
- [ ] **3D è§†å›¾**: å¯èƒ½çš„åŸé‚¦å¯è§†åŒ–

---

 ## 8. å¼€å‘æ—¥å¿—

### v0.5.0 (2026-01-08) - èƒœåˆ©æ¡ä»¶ä¸æŒä¹…åŒ– (Phase 1 å®Œæˆ)
**é‡å¤§å˜æ›´**:
- âœ… å®ç°éƒ¨è½å¤§å…å¥‡è¿¹å»ºç­‘
- âœ… å®ç°æŒä¹…åŒ–ç³»ç»Ÿ (localStorage è‡ªåŠ¨ä¿å­˜)
- âœ… å®ç°èƒœåˆ©æ¡ä»¶æ£€æŸ¥ä¸èƒœåˆ©å¼¹çª—
- âœ… Phase 1 å®Œæˆï¼Œç”Ÿäº§å°±ç»ª

**æ–°å¢åŠŸèƒ½**:

#### èƒœåˆ©æ¡ä»¶ç³»ç»Ÿ
1. **éƒ¨è½å¤§å…**:
   - æˆæœ¬: 2000 æœ¨æ + 1000 çŸ³å¤´ + 500 ä¼ ç»Ÿ + 1000 ç†å¿µ
   - æ•ˆæœ: å®Œæˆéƒ¨è½æ—¶ä»£ï¼Œæ˜¾ç¤ºèƒœåˆ©å¼¹çª—
   - é™åˆ¶: æœ€å¤šå»ºé€  1 ä¸ª (å¥‡è¿¹å»ºç­‘)
   - åˆ†ç±»: å¥‡è¿¹å»ºç­‘
   - æè¿°: "ç»Ÿä¸€å„ä¸ªæ°æ—ï¼Œæˆ‘ä»¬å°†ä¸å†æµæµªã€‚è¿™æ˜¯æ–‡æ˜çš„åŸºçŸ³ã€‚"

2. **èƒœåˆ©å¼¹çª— (VictoryModal)**:
   - æ–‡ä»¶: `src/components/VictoryModal.tsx`
   - è§¦å‘æ¡ä»¶: å»ºé€ ç¬¬ä¸€ä¸ªéƒ¨è½å¤§å…
   - æ˜¾ç¤ºå†…å®¹:
     - æ ‡é¢˜: "æ–‡æ˜çš„é»æ˜"
     - å†å²æ–‡æœ¬: "ç»è¿‡æ¼«é•¿çš„å²æœˆï¼Œä½ çš„æ—äººæˆ˜èƒœäº†ä¸¥å¯’ã€é¥¥é¥¿ä¸é‡å…½..."
     - ç»Ÿè®¡: ç”Ÿå­˜å¤©æ•°ã€æ€»äººå£ã€ç ”ç©¶ç§‘æŠ€
     - é€‰é¡¹:
       - ç»§ç»­ç•™åœ¨éƒ¨è½: æ¢å¤æ¸¸æˆç»§ç»­æ¸¸ç©
       - è¿›å…¥ç‹å›½æ—¶ä»£: æç¤ºå¼€å‘ä¸­

3. **èƒœåˆ©æ£€æŸ¥é€»è¾‘**:
   - å»ºé€ éƒ¨è½å¤§å…æ—¶è‡ªåŠ¨è§¦å‘
   - è®¾ç½® `isEraCompleted = true`
   - æš‚åœæ¸¸æˆ (`isPaused = true`)
   - æ·»åŠ èƒœåˆ©æ—¥å¿—æ¶ˆæ¯

#### æŒä¹…åŒ–ç³»ç»Ÿ
1. **è‡ªåŠ¨ä¿å­˜**:
   - ä½¿ç”¨ Zustand persist ä¸­é—´ä»¶
   - è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ¸¸æˆçŠ¶æ€åˆ° localStorage
   - ä¿å­˜é”®: 'civ-odyssey-save'
   - ç‰ˆæœ¬æ§åˆ¶: v1 (æ”¯æŒæœªæ¥è¿ç§»)
   - åˆ·æ–°é¡µé¢åè‡ªåŠ¨æ¢å¤æ¸¸æˆçŠ¶æ€

2. **Decimal.js é‡æ–°æ°´åˆ**:
   - æ–‡ä»¶: `src/utils/persistence.ts`
   - å‡½æ•°: `deepMergeAndRehydrate()`
   - åŠŸèƒ½:
     - é€’å½’åˆå¹¶æŒä¹…åŒ–çŠ¶æ€ä¸åˆå§‹çŠ¶æ€
     - æ¢å¤ Decimal å®ä¾‹ï¼ˆé¿å…ç±»å‹ä¸¢å¤±ï¼‰
     - è·³è¿‡ undefined å€¼ï¼ˆæ”¯æŒæ¨¡å¼æ¼”è¿›ï¼‰
     - é€’å½’åˆå¹¶å¯¹è±¡ï¼ˆä½†ä¸æ˜¯æ•°ç»„ï¼‰

3. **é‡ç½®å­˜æ¡£**:
   - å¯¼å‡ºåŠ¨ä½œ: `gameActions.resetSave()`
   - åŠŸèƒ½:
     - æ¸…é™¤ localStorage ä¸­çš„ä¿å­˜æ•°æ®
     - åˆ·æ–°é¡µé¢é‡æ–°å¼€å§‹
   - ç”¨é€”: æµ‹è¯•æˆ–é‡æ–°å¼€å§‹æ¸¸æˆ

#### UI æ›´æ–°
1. **BuildingsPanel**:
   - æ–°å¢"å¥‡è¿¹å»ºç­‘"åˆ†ç±» (é‡‘è‰²ä¸»é¢˜)
   - éƒ¨è½å¤§å… (Scroll å›¾æ ‡)
   - ç†å¿µæˆæœ¬æ£€æŸ¥
   - å¥‡è¿¹å»ºç­‘é™åˆ¶æ˜¾ç¤º

2. **VictoryModal**:
   - é‡‘è‰²æ¸å˜ä¸»é¢˜ (from-amber-500 via-yellow-500)
   - å‘å…‰æ•ˆæœ (backdrop-blur, ring, shadow)
   - å†å²æ–‡æœ¬ä¸ç»Ÿè®¡æ˜¾ç¤º
   - ä¸¤ä¸ªæ“ä½œæŒ‰é’®

#### æ¸¸æˆé€»è¾‘æ›´æ–°
1. **éƒ¨è½å¤§å…å»ºé€ é€»è¾‘** (buildingsSlice.ts):
   ```typescript
   // æ£€æŸ¥å¥‡è¿¹å»ºç­‘é™åˆ¶
   const config = BUILDING_CONFIG[type];
   if (config.category === 'wonder' && building.count.gte(1)) {
     return state; // æœ€å¤š 1 ä¸ª
   }

   // è·Ÿè¸ªæ˜¯å¦ä¸ºé¦–æ¬¡å»ºé€ éƒ¨è½å¤§å…
   const isTribalHall = type === 'tribalHall' as any;
   const isFirstTribalHall = isTribalHall && building.count.equals(0);

   // ... æ‰£é™¤èµ„æºï¼Œå¢åŠ å»ºç­‘æ•°é‡ ...

   // è§¦å‘èƒœåˆ©æ£€æŸ¥
   if (isTribalHall && isFirstTribalHall) {
     setTimeout(() => {
       set((s: any) => ({
         ...s,
         isEraCompleted: true,
         isPaused: true,
       }));
       (get() as any).addLog('éƒ¨è½æ—¶ä»£å·²å®Œæˆï¼éƒ¨è½å¤§å…å·²å»ºæˆï¼Œæ–‡æ˜çš„æ–°ç¯‡ç« å³å°†å¼€å§‹ã€‚', 'success');
     }, 0);
   }
   ```

2. **æŒä¹…åŒ–é…ç½®** (useGameStore.ts):
   ```typescript
   import { persist, createJSONStorage } from 'zustand/middleware';
   import { deepMergeAndRehydrate } from '../utils/persistence';

   export const useGameStore = create<GameStore>()(
     persist(
       (set, get, api) => ({
         ...createGameSlice(),
         ...createResourceSlice(set, get, api),
         // ... å…¶ä»– slices
       }),
       {
         name: 'civ-odyssey-save',
         storage: createJSONStorage(() => localStorage),
         merge: (persistedState: any, currentState) => {
           return deepMergeAndRehydrate(persistedState, currentState);
         },
         version: 1,
       }
     )
   );
   ```

3. **Decimal.js é‡æ–°æ°´åˆå·¥å…·** (persistence.ts):
   ```typescript
   export function deepMergeAndRehydrate<T>(persistedState: any, initialState: T): T {
     const result = { ...initialState };

     for (const key in persistedState) {
       const persistedValue = persistedState[key];
       const initialValue = (initialState as any)[key];

       // è·³è¿‡ undefined å€¼ï¼ˆæ”¯æŒæ¨¡å¼æ¼”è¿›ï¼‰
       if (persistedValue === undefined || initialValue === undefined) {
         continue;
       }

       // æ¢å¤ Decimal å®ä¾‹
       if (initialValue instanceof Decimal) {
         result[key as keyof T] = new Decimal(persistedValue) as any;
         continue;
       }

       // é€’å½’åˆå¹¶å¯¹è±¡
       if (typeof persistedValue === 'object' && !Array.isArray(persistedValue)) {
         result[key as keyof T] = deepMergeAndRehydrate(persistedValue, initialValue) as any;
         continue;
       }

       // ä½¿ç”¨æŒä¹…åŒ–å€¼
       result[key as keyof T] = persistedValue as any;
     }

     return result;
   }
   ```

#### ç±»å‹ç³»ç»Ÿæ›´æ–°
1. **BuildingType** (game.ts):
   - æ–°å¢ `TribalHall = 'tribalHall'`

2. **GameSliceState** (store/types.ts):
   - æ–°å¢ `isEraCompleted: boolean`

3. **EventSliceState** (store/types.ts):
   - æ–°å¢ `activeSpecialAction` (ç‰¹æ®ŠåŠ¨ä½œçŠ¶æ€)

4. **EventActions** (store/types.ts):
   - æ–°å¢ `setActiveSpecialAction`
   - æ–°å¢ `completeSpecialAction`
   - æ–°å¢ `clearSpecialAction`

#### æŠ€æœ¯å€ºåŠ¡ä¿®å¤
1. **tick.ts**:
   - ç§»é™¤å¤šä½™çš„é—­åˆæ‹¬å· (ç¬¬ 410 è¡Œ)

2. **LogPanel.tsx**:
   - ä¿®å¤ isMounted å˜é‡å‘½å
   - æ”¹ä¸º `isMountedRef` é¿å…ä¸ React useRef å†²çª

3. **useGameLoop.ts**:
   - æ”¹è¿›é¦–å¸§å¤„ç†é€»è¾‘
   - ç§»é™¤ return è¯­å¥ï¼Œæ”¹ä¸ºç«‹å³è°ƒåº¦ä¸‹ä¸€å¸§
   - æ·»åŠ  tickCount è·Ÿè¸ª
   - æ¯ 100 tick è¾“å‡ºæ—¥å¿—ï¼ˆç”¨äºè°ƒè¯•ï¼‰

4. **ActionPanel.tsx**:
   - æ·»åŠ  useGameStore å¯¼å…¥ï¼ˆç”¨äº VictoryModalï¼‰

**æ–‡ä»¶ä¿®æ”¹**:
- `src/components/VictoryModal.tsx`: æ–°å¢èƒœåˆ©å¼¹çª—ç»„ä»¶
- `src/utils/persistence.ts`: æ–°å¢æŒä¹…åŒ–å·¥å…·å‡½æ•°
- `src/store/useGameStore.ts`: æ·»åŠ æŒä¹…åŒ–ä¸­é—´ä»¶ã€isEraCompletedã€resetSave
- `src/store/slices/buildingsSlice.ts`: æ·»åŠ éƒ¨è½å¤§å…é…ç½®ã€èƒœåˆ©æ£€æŸ¥é€»è¾‘
- `src/store/slices/techSlice.ts`: æ·»åŠ  tradition èµ„æºçŠ¶æ€
- `src/store/types.ts`: æ·»åŠ  isEraCompletedã€activeSpecialAction
- `src/types/game.ts`: æ·»åŠ  TribalHall å»ºç­‘ç±»å‹
- `src/components/BuildingsPanel.tsx`: æ·»åŠ å¥‡è¿¹å»ºç­‘åˆ†ç±»
- `src/components/LogPanel.tsx`: ä¿®å¤ isMounted å‘½åå†²çª
- `src/components/ActionPanel.tsx`: æ·»åŠ  useGameStore å¯¼å…¥
- `src/game/tick.ts`: ç§»é™¤å¤šä½™é—­åˆæ‹¬å·
- `src/hooks/useGameLoop.ts`: æ”¹è¿›é¦–å¸§å¤„ç†é€»è¾‘

**éªŒè¯ç»“æœ**:
- âœ… TypeScript ç¼–è¯‘é€šè¿‡ (æ— é”™è¯¯)
- âœ… éƒ¨è½å¤§å…æ­£ç¡®å»ºé€ å¹¶è§¦å‘èƒœåˆ©
- âœ… èƒœåˆ©å¼¹çª—æ­£ç¡®æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
- âœ… æŒä¹…åŒ–ç³»ç»Ÿæ­£ç¡®ä¿å­˜å’Œæ¢å¤æ¸¸æˆçŠ¶æ€
- âœ… Decimal.js å®ä¾‹æ­£ç¡®é‡æ–°æ°´åˆ
- âœ… é‡ç½®å­˜æ¡£åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… å¥‡è¿¹å»ºç­‘é™åˆ¶æ­£ç¡®ç”Ÿæ•ˆ
- âœ… èƒœåˆ©æ—¥å¿—æ­£ç¡®æ˜¾ç¤º
- âœ… èƒœåˆ©åæ¸¸æˆè‡ªåŠ¨æš‚åœ

**å¹³è¡¡æ€§è°ƒæ•´**:
- éƒ¨è½å¤§å…æˆæœ¬: 2000 æœ¨æ + 1000 çŸ³å¤´ + 500 ä¼ ç»Ÿ + 1000 ç†å¿µ
- éƒ¨è½å¤§å…é™åˆ¶: æœ€å¤š 1 ä¸ª (å¥‡è¿¹å»ºç­‘)
- ä¼ ç»Ÿèµ„æºè·å–:
  - å›¾è…¾æŸ±: 0.05/ç§’/ä¸ª
  - ç››å¤§ç¥­å…¸: 100 ä¼ ç»Ÿ/5 åˆ†é’Ÿ
  - æ­»äº¡è½¬åŒ–: 50 ä¼ ç»Ÿ/äºº

**Phase 1 å®Œæˆ**:
- âœ… æ‰€æœ‰ Phase 1 æ ¸å¿ƒæœºåˆ¶å·²å®ç°
- âœ… èƒœåˆ©æ¡ä»¶å·²å®ç° (éƒ¨è½å¤§å…)
- âœ… æŒä¹…åŒ–ç³»ç»Ÿå·²å®ç° (è‡ªåŠ¨ä¿å­˜)
- âœ… Phase 1 æ¸¸æˆå¾ªç¯å®Œæ•´
- âœ… ä¸º Phase 2 é“ºå«å®Œæˆ (ä¼ ç»Ÿèµ„æº)
- âœ… ç”Ÿäº§å°±ç»ªï¼Œå¯æŠ•å…¥ç”Ÿäº§ç¯å¢ƒ

**ä¸‹ä¸€æ­¥**:
- å¼€å§‹ Phase 2: ç‹å›½æ—¶ä»£å¼€å‘
- å®ç°ä¼ ç»Ÿèµ„æº 500 â†’ Era 2 è½¬æ¢
- æ·»åŠ å¹¸ç¦åº¦ã€ç¨æ”¶ã€æ”¿ç­–ç³»ç»Ÿ
- æ‰©å±•å»ºç­‘ (æˆ¿å±‹ã€å¸‚åœºã€å…µè¥ã€å›¾ä¹¦é¦†)

---

### v0.4.0 (2026-01-07) - æ–‡åŒ–æ–‡æ˜ç³»ç»Ÿ (Sprint 3)
**é‡å¤§å˜æ›´**:
- âœ… å®ç°ä¼ ç»Ÿ (Tradition) èµ„æºä½“ç³»
- âœ… æ·»åŠ å›¾è…¾æŸ±å’Œå¢“åœ°å»ºç­‘
- âœ… å®ç°ç››å¤§ç¥­å…¸ä¸»åŠ¨åŠ¨ä½œ
- âœ… æ·»åŠ æ­»äº¡è½¬åŒ–è¡¥å¿æœºåˆ¶
- âœ… å®Œå–„éšæœºäº‹ä»¶ UI é›†æˆ

**æ–°å¢åŠŸèƒ½**:

#### ä¼ ç»Ÿèµ„æºç³»ç»Ÿ
1. **æ–°èµ„æº**: ä¼ ç»Ÿ
   - æè¿°: "éƒ¨è½çš„è®°å¿†ã€ä¿¡ä»°ä¸ä¸æˆæ–‡çš„å¾‹æ³•"
   - å­˜å‚¨ä¸Šé™: 1000
   - è·å–æ–¹å¼:
     - å›¾è…¾æŸ±è‡ªåŠ¨äº§å‡º: 0.05/ç§’/ä¸ª
     - ç››å¤§ç¥­å…¸: 100 ä¼ ç»Ÿ/æ¬¡ (5 åˆ†é’Ÿ CD)
     - æ­»äº¡è½¬åŒ–: 50 ä¼ ç»Ÿ/äºº (éœ€å¢“åœ°)

2. **å›¾è…¾æŸ±**:
   - æˆæœ¬: 50 æœ¨æ + 20 çŸ³å¤´ + 100 ç†å¿µ
   - æ•ˆæœ: è‡ªåŠ¨äº§å‡ºä¼ ç»Ÿ (+0.05/ç§’/ä¸ª)
   - å»ºè®®ä¸Šé™: 5 ä¸ª (æˆæœ¬æŒ‡æ•°å¢é•¿ 1.8x)
   - åˆ†ç±»: æ–‡åŒ–å»ºç­‘
   - æè¿°: "é“­åˆ»ç€å…ˆç¥–çš„æ•…äº‹ï¼Œå‡èšéƒ¨è½çš„ç²¾ç¥"

3. **å¢“åœ°**:
   - æˆæœ¬: 100 çŸ³å¤´ (æŒ‡æ•°å¢é•¿ 1.5x)
   - æ•ˆæœ: **æ­»äº¡è½¬åŒ–æœºåˆ¶**
   - é¥¥é¥¿æ­»äº¡: +50 ä¼ ç»Ÿ/äºº
   - å¯’å†·æ­»äº¡: +50 ä¼ ç»Ÿ/äºº
   - åˆ†ç±»: æ–‡åŒ–å»ºç­‘
   - æè¿°: "æˆ‘ä»¬å°†é€è€…å½’è¿˜å¤§åœ°ï¼Œä½†ä»–ä»¬çš„æ™ºæ…§é•¿å­˜"

4. **ç››å¤§ç¥­å…¸**:
   - æˆæœ¬: 500 æµ†æœ + 100 æœ¨æ + 50 è‚‰å¹²
   - æ•ˆæœ: ç¬é—´è·å¾— 100 ä¼ ç»Ÿ
   - å†·å´: 300 ç§’ (5 åˆ†é’Ÿ)
   - æ—¥å¿—: ğŸ‰ é‡‘è‰²åº†ç¥æ¶ˆæ¯
   - ç›®çš„: åæœŸèµ„æºå›æ”¶ï¼Œè¿«ä½¿æå‡å­˜å‚¨ä¸Šé™

#### éšæœºäº‹ä»¶ç³»ç»Ÿå®Œå–„
1. **äº‹ä»¶ä¿®å¤**:
   - é£Ÿç‰©è…çƒ‚: ä»"ä»…æ˜¥å­£"æ”¹ä¸º"éå†¬å­£" (æ˜¥/å¤/ç§‹)
   - ç¬¦åˆéœ€æ±‚: "å­£èŠ‚ != å†¬" ä¸”é£Ÿç‰© > 200

2. **ç‰¹æ®ŠåŠ¨ä½œ UI é›†æˆ**:
   - åŠ¨æ€æ˜¾ç¤ºåœ¨ ActionPanel
   - è¿›åº¦æ¡å¯è§†åŒ–å®Œæˆè¿›åº¦ (50ms åˆ·æ–°)
   - å€’è®¡æ—¶æ˜¾ç¤ºå‰©ä½™æ—¶é—´
   - è‡ªåŠ¨å®Œæˆæˆ–æ‰‹åŠ¨æ”¾å¼ƒåŠŸèƒ½
   - æ”¯æŒç ”ç©¶å›¾è…¾ (20 ç§’) å’Œè¿½è¸ªè¡€è¿¹ (15 ç§’)

#### UI æ›´æ–°
1. **ResourcePanel**:
   - æ–°å¢ä¼ ç»Ÿèµ„æºæ˜¾ç¤º
   - é»„è‰²ä¸»é¢˜é…è‰² (Scroll å›¾æ ‡)
   - å­˜å‚¨è¿›åº¦æ¡å’Œè­¦å‘Š

2. **BuildingsPanel**:
   - æ–°å¢"æ–‡åŒ–å»ºç­‘"åˆ†ç±» (é»„è‰²/é‡‘è‰²ä¸»é¢˜)
   - å›¾è…¾æŸ± (Scroll å›¾æ ‡)
   - å¢“åœ° (Skull å›¾æ ‡)
   - æ”¯æŒç†å¿µæˆæœ¬æ£€æŸ¥

3. **ActionPanel**:
   - ç››å¤§ç¥­å…¸æŒ‰é’®: é‡‘è‰²æ¸å˜ (from-yellow-500 to-amber-500)
   - Sparkles å›¾æ ‡
   - å¤šèµ„æºæ¶ˆè€—éªŒè¯ (æµ†æœ + æœ¨æ + è‚‰å¹²)
   - 5 åˆ†é’Ÿå†·å´æ˜¾ç¤º

#### æ¸¸æˆé€»è¾‘æ›´æ–°
1. **å›¾è…¾æŸ±è‡ªåŠ¨äº§å‡º** (tick.ts):
   ```typescript
   // æ¯ä¸ªå›¾è…¾æŸ±äº§ç”Ÿ 0.005 ä¼ ç»Ÿ/ç§’ = 0.05/ç§’/ä¸ª (at 10 TPS)
   const totemPoleCount = getBuildingCount('totemPole');
   const traditionProduction = totemPoleCount.times(0.005);
   ```

2. **æ­»äº¡è½¬åŒ–é€»è¾‘** (tick.ts):
   ```typescript
   // é¥¥é¥¿æ­»äº¡
   if (é¥¥é¥¿å¯¼è‡´æ­»äº¡ && æ‹¥æœ‰å¢“åœ°) {
     ä¼ ç»Ÿ += æ­»äº¡äººæ•° Ã— 50;
     æ—¥å¿—: "ä¸€åæ—äººç¦»ä¸–äº†ï¼Œä½†ä»–çš„ç²¾ç¥åŠ å…¥äº†ä¼ ç»Ÿ";
   }

   // å¯’å†·æ­»äº¡
   if (å¯’å†·å¯¼è‡´æ­»äº¡ && æ‹¥æœ‰å¢“åœ°) {
     ä¼ ç»Ÿ += æ­»äº¡äººæ•° Ã— 50;
     æ—¥å¿—: åŒä¸Š;
   }
   ```

3. **ç››å¤§ç¥­å…¸é€»è¾‘** (ActionPanel.tsx):
   ```typescript
   // å¤šèµ„æºæ¶ˆè€—æ£€æŸ¥
   const festivalCost = {
     [ResourceType.Food]: new Decimal(500),
     [ResourceType.Wood]: new Decimal(100),
     [ResourceType.CuredMeat]: new Decimal(50),
   };

   // å¥–åŠ±ä¼ ç»Ÿ
   useGameStore.setState(prev => ({
     tradition: (prev.tradition || new Decimal(0)).plus(100)
   }));
   ```

#### ç±»å‹ç³»ç»Ÿæ›´æ–°
1. **ResourceType**:
   - æ–°å¢ `Tradition = 'tradition'`

2. **BuildingType**:
   - æ–°å¢ `TotemPole = 'totemPole'`
   - æ–°å¢ `Graveyard = 'graveyard'`

3. **StorageCap**:
   - æ–°å¢ `tradition: Decimal`

#### æŠ€æœ¯å€ºåŠ¡
1. **eventSlice**:
   - ä¿®å¤é£Ÿç‰©è…çƒ‚å­£èŠ‚é™åˆ¶ (éå†¬å­£)
   - æ·»åŠ  activeSpecialAction çŠ¶æ€ç®¡ç†
   - å®ç° setActiveSpecialAction / completeSpecialAction / clearSpecialAction

2. **GameUIContext**:
   - æ·»åŠ ä¼ ç»Ÿèµ„æºè¿½è¸ª
   - æ·»åŠ ä¼ ç»Ÿå­˜å‚¨ä¸Šé™è¿½è¸ª
   - æ›´æ–° Decimal æ¯”è¾ƒé€»è¾‘

3. **BuildingsPanel**:
   - æ”¯æŒç†å¿µæˆæœ¬æ£€æŸ¥
   - æ–°å¢æ–‡åŒ–å»ºç­‘åˆ†ç±» UI

4. **ActionPanel**:
   - æ·»åŠ ç››å¤§ç¥­å…¸åŠ¨ä½œ
   - å®ç°å¤šèµ„æºæ¶ˆè€—éªŒè¯

**æ–‡ä»¶ä¿®æ”¹**:
- `src/types/game.ts`: æ–°å¢ Tradition èµ„æºã€TotemPole/Graveyard å»ºç­‘ã€StorageCap.tradition
- `src/store/slices/resourceSlice.ts`: æ·»åŠ ä¼ ç»Ÿèµ„æºåˆå§‹å€¼ (0) å’Œå­˜å‚¨ä¸Šé™ (1000)
- `src/store/slices/buildingsSlice.ts`: æ·»åŠ å›¾è…¾æŸ±å’Œå¢“åœ°é…ç½®ã€åˆ†ç±» 'culture'
- `src/store/slices/techSlice.ts`: æ·»åŠ  tradition åˆ°åˆå§‹çŠ¶æ€
- `src/game/tick.ts`: å®ç°å›¾è…¾æŸ±äº§å‡ºã€æ­»äº¡è½¬åŒ–é€»è¾‘
- `src/store/slices/eventSlice.ts`: ä¿®å¤é£Ÿç‰©è…çƒ‚å­£èŠ‚é™åˆ¶ï¼Œæ·»åŠ ç‰¹æ®ŠåŠ¨ä½œçŠ¶æ€ç®¡ç†
- `src/components/ActionPanel.tsx`: æ·»åŠ ç››å¤§ç¥­å…¸æŒ‰é’®å’Œé€»è¾‘
- `src/components/ResourcePanel.tsx`: æ·»åŠ ä¼ ç»Ÿèµ„æºæ˜¾ç¤º
- `src/components/BuildingsPanel.tsx`: æ·»åŠ æ–‡åŒ–å»ºç­‘åˆ†ç±»
- `src/contexts/GameUIContext.tsx`: æ·»åŠ ä¼ ç»Ÿèµ„æºè¿½è¸ª
- `src/store/types.ts`: æ·»åŠ  tradition åˆ° TechSliceState

**éªŒè¯ç»“æœ**:
- âœ… TypeScript ç¼–è¯‘é€šè¿‡ (æ— é”™è¯¯)
- âœ… ä¼ ç»Ÿèµ„æºæ­£ç¡®å­˜å‚¨å’Œæ˜¾ç¤º
- âœ… å›¾è…¾æŸ±è‡ªåŠ¨äº§å‡ºä¼ ç»Ÿ
- âœ… æ­»äº¡è½¬åŒ–æœºåˆ¶æ­£å¸¸å·¥ä½œ
- âœ… ç››å¤§ç¥­å…¸æ¶ˆè€—å¤šèµ„æºå¹¶å¥–åŠ±ä¼ ç»Ÿ
- âœ… ç››å¤§ç¥­å…¸å†·å´æœºåˆ¶æ­£å¸¸å·¥ä½œ
- âœ… ç‰¹æ®ŠåŠ¨ä½œ UI å®Œæ•´é›†æˆ
- âœ… æ‰€æœ‰æ—¥å¿—æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤º
- âœ… å»ºç­‘æˆæœ¬æŒ‡æ•°å¢é•¿æ­£ç¡®
- âœ… UI åˆ†ç±»å’Œä¸»é¢˜ä¸€è‡´

**å¹³è¡¡æ€§è°ƒæ•´**:
- å›¾è…¾æŸ±äº§å‡º: 0.05/ç§’ (1 ä¸ª = 3 ä¼ ç»Ÿ/åˆ†é’Ÿ)
- ç››å¤§ç¥­å…¸: 100 ä¼ ç»Ÿ/5 åˆ†é’Ÿ (20 ä¼ ç»Ÿ/åˆ†é’Ÿ)
- æ­»äº¡è½¬åŒ–: 50 ä¼ ç»Ÿ/äºº (è¡¥å¿æœºåˆ¶)
- å›¾è…¾æŸ±å»ºè®®ä¸Šé™: 5 ä¸ª (1.8x æŒ‡æ•°å¢é•¿)
- ä¼ ç»Ÿå­˜å‚¨ä¸Šé™: 1000 (Era 2 è§£é”ç›®æ ‡: 500)

**ä¸º Era 2 é“ºå«**:
- âœ… ä¼ ç»Ÿèµ„æºä½“ç³»å®Œæ•´å®ç°
- âœ… ç¨³å®šè·å–: å›¾è…¾æŸ± (è¢«åŠ¨)
- âœ… ä¸»åŠ¨è·å–: ç››å¤§ç¥­å…¸ (èµ„æºå›æ”¶)
- âœ… è¡¥å¿æœºåˆ¶: æ­»äº¡è½¬åŒ– (å¢“åœ°)
- âœ… å­˜å‚¨ç®¡ç†: 1000 ä¸Šé™ï¼Œé¼“åŠ±å»ºè®¾æå‡
- âœ… è§£é”ç›®æ ‡: 500 ä¼ ç»Ÿ â†’ Era 2 ç‹å›½æ—¶ä»£

**æ€»ç»“**:
éƒ¨è½å·²æ‹¥æœ‰"çµé­‚"ï¼ä¼ ç»Ÿèµ„æºä½“ç³»ä¸º Era 2 ç‹å›½æ—¶ä»£å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚æ­»äº¡ä¸å†åªæ˜¯æŒ«è´¥ï¼Œè€Œæ˜¯è½¬åŒ–ä¸ºéƒ¨è½ç²¾ç¥çš„ä¸€éƒ¨åˆ†ã€‚ç©å®¶ç°åœ¨æœ‰äº†æ˜ç¡®çš„é•¿æœŸç›®æ ‡ï¼šç§¯ç´¯ä¼ ç»Ÿä»¥å¼€å¯ç‹å›½æ—¶ä»£ã€‚

---

### v0.3.0 (2026-01-07) - Bugä¿®å¤ä¸æ¶æ„ä¼˜åŒ–
**é‡å¤§å˜æ›´**:
- âœ… ä¿®å¤æ‰€æœ‰è‡´å‘½Bugï¼ˆ4ä¸ªï¼‰
- âœ… ä¿®å¤æ‰€æœ‰é«˜ä¼˜å…ˆçº§æ¶æ„é—®é¢˜ï¼ˆ4ä¸ªï¼‰
- âœ… ä¿®å¤æ‰€æœ‰ä¸­ä½ä¼˜å…ˆçº§é—®é¢˜ï¼ˆ6ä¸ªï¼‰
- âœ… ä»£ç è´¨é‡æå‡è‡³ç”Ÿäº§å°±ç»ª

**ä¿®å¤è¯¦æƒ…**:

#### è‡´å‘½Bugä¿®å¤
1. **æ€§èƒ½ç“¶é¢ˆ - è°ƒè¯•æ—¥å¿—**
   - åˆ é™¤ tribeSlice.ts ä¸­ 11 æ¡ console.log
   - æ¯ç§’å‡å°‘ 110 æ¡æ—¥å¿—è¾“å‡ºï¼ˆ10 TPS Ã— 11æ¡ï¼‰
   - æ–‡ä»¶: `src/store/slices/tribeSlice.ts`

2. **æ¸¸æˆå¾ªç¯ - é¦–å¸§çˆ†å‘Bug**
   - æ·»åŠ é¦–å¸§è·³è¿‡é€»è¾‘
   - é˜²æ­¢æ¸¸æˆå¼€å§‹æ—¶æ‰§è¡Œæ•°ç™¾ä¸ªtick
   - æ–‡ä»¶: `src/hooks/useGameLoop.ts`

3. **æ•å…½é™·é˜±é€»è¾‘å®Œå…¨å¤±æ•ˆ**
   - é‡æ„æ¦‚ç‡è®¡ç®—é€»è¾‘
   - ä¿®å¤å‰: æ— æ„ä¹‰çš„ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œå‡ ä¹ä¸äº§ç”Ÿèµ„æº
   - ä¿®å¤å: æ­£ç¡®çš„å¾ªç¯æ¦‚ç‡è®¡ç®—
   - æ–‡ä»¶: `src/game/tick.ts`

4. **æ¶æ„è¿è§„ - LogPanelç›´æ¥è®¢é˜…**
   - æ”¹ä¸º 200ms è½®è¯¢æ¨¡å¼
   - éµå¾ªé¡¹ç›®æ¶æ„ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
   - æ–‡ä»¶: `src/components/LogPanel.tsx`

#### é«˜ä¼˜å…ˆçº§æ¶æ„ä¿®å¤
1. **GameUIContext æ·»åŠ ç¼ºå¤±èµ„æº**
   - æ–°å¢: Stone, Meat, CuredMeat, Ideas, storageCaps
   - æ–‡ä»¶: `src/contexts/GameUIContext.tsx`

2. **ResourcePanel ç§»é™¤ç‹¬ç«‹è½®è¯¢**
   - å®Œå…¨ç§»é™¤ç‹¬ç«‹ interval
   - ä½¿ç”¨ GameUIContext ç»Ÿä¸€æ•°æ®æº
   - ä»£ç ä» 200 è¡Œå‡å°‘åˆ° 100 è¡Œ
   - æ–‡ä»¶: `src/components/ResourcePanel.tsx`

3. **æ•´åˆå¤šä¸ªç‹¬ç«‹è½®è¯¢**
   - GameUIContext ä½œä¸ºå•ä¸€ä¸»è½®è¯¢æº
   - ä¿ç•™åŠŸèƒ½ç‰¹å®šè½®è¯¢ï¼ˆå†·å´æ˜¾ç¤ºï¼‰
   - æ–‡ä»¶: å¤šä¸ªç»„ä»¶

4. **ä¿®å¤å­—ç¬¦ä¸²æ¯”è¾ƒè¯¯åˆ¤**
   - æ”¹ä¸º Decimal æ•°å€¼ç²¾ç¡®æ¯”è¾ƒ
   - æ·»åŠ  resourcesDecimal å­—æ®µ
   - æ¶ˆé™¤ UI æ›´æ–°ç²¾åº¦æŸå¤±
   - æ–‡ä»¶: `src/contexts/GameUIContext.tsx`

#### ä¸­ä¼˜å…ˆçº§ä¿®å¤
1. **ActionPanel Decimal.js ç²¾åº¦æŸå¤±**
   - ä¿®å¤: `new Decimal(0.5).times(skinMultiplier)`
   - æ–‡ä»¶: `src/components/ActionPanel.tsx`

2. **CompactActions Decimal.js ç²¾åº¦æŸå¤±**
   - ä¿®å¤: åŒä¸Š
   - æ–‡ä»¶: `src/components/CompactActions.tsx`

3. **eventSlice Decimal.js æ··ç”¨**
   - ä¿®å¤ç¬¬27è¡Œ: `currentFood.times(new Decimal(0.1))`
   - ä¿®å¤ç¬¬53è¡Œ: `new Decimal(30).plus(new Decimal(Math.random()).times(20))`
   - æ–‡ä»¶: `src/store/slices/eventSlice.ts`

#### ä½ä¼˜å…ˆçº§ä¿®å¤
1. **ç§»é™¤ tick.ts è°ƒè¯•ä»£ç **
   - åˆ é™¤ç¬¬369è¡Œ console.log
   - æ–‡ä»¶: `src/game/tick.ts`

2. **æ·»åŠ  useGameLoop æ¯å¸§æœ€å¤§tické™åˆ¶**
   - é™åˆ¶æ¯å¸§æœ€å¤š 10 ä¸ªtickï¼ˆ1ç§’æ¸¸æˆæ—¶é—´ï¼‰
   - é˜²æ­¢çº¿ç¨‹é˜»å¡åUIå†»ç»“
   - æ–‡ä»¶: `src/hooks/useGameLoop.ts`

3. **ä¼˜åŒ– tick.ts çŠ¶æ€å¿«ç…§é€»è¾‘**
   - åˆ é™¤å…¨å±€ settlersBeforeTick å˜é‡
   - ä½¿ç”¨æ¸…æ™°çš„å±€éƒ¨å˜é‡å‘½å
   - é¿å…çŠ¶æ€æ··ä¹±
   - æ–‡ä»¶: `src/game/tick.ts`

**æ–‡ä»¶ä¿®æ”¹**:
- `src/store/slices/tribeSlice.ts`: åˆ é™¤è°ƒè¯•æ—¥å¿—
- `src/hooks/useGameLoop.ts`: ä¿®å¤é¦–å¸§ï¼Œæ·»åŠ tické™åˆ¶
- `src/game/tick.ts`: ä¿®å¤é™·é˜±é€»è¾‘ï¼Œåˆ é™¤è°ƒè¯•ï¼Œä¼˜åŒ–å˜é‡
- `src/components/LogPanel.tsx`: æ”¹ä¸ºè½®è¯¢æ¨¡å¼
- `src/contexts/GameUIContext.tsx`: æ·»åŠ ç¼ºå¤±èµ„æºï¼Œä¿®å¤æ¯”è¾ƒé€»è¾‘
- `src/components/ResourcePanel.tsx`: ç§»é™¤ç‹¬ç«‹è½®è¯¢
- `src/components/ActionPanel.tsx`: ä¿®å¤Decimalç²¾åº¦
- `src/components/CompactActions.tsx`: ä¿®å¤Decimalç²¾åº¦
- `src/store/slices/eventSlice.ts`: ä¿®å¤Decimalæ··ç”¨

**éªŒè¯ç»“æœ**:
- âœ… TypeScript ç¼–è¯‘é€šè¿‡ (æ— é”™è¯¯)
- âœ… ç”Ÿäº§æ„å»ºæˆåŠŸ (1.99s)
- âœ… é¡¹ç›®å¥åº·åº¦: ä¼˜ç§€

### v0.2.0 (2025-01-07) - å¹³è¡¡æ€§é‡æ„
**é‡å¤§å˜æ›´**:
- âœ… å®ç°é»„é‡‘æ¯”ä¾‹æ¨¡å‹ (1:3)
- âœ… åŠ¨æ€é£Ÿç‰©æ¶ˆè€— (å­£èŠ‚+æ¸©æš–)
- âœ… è¡£ç‰©ç³»ç»Ÿ
- âœ… é£Ÿç‰©çŠ¶æ€é¢æ¿
- âœ… ç¯ç«æ¶ˆè€—è°ƒæ•´ (1.0/ç§’)

**æ–‡ä»¶ä¿®æ”¹**:
- `tribeSlice.ts`: æ·»åŠ åŠ¨æ€æ¶ˆè€—è®¡ç®—
- `bonfireSlice.ts`: è°ƒæ•´ç¯ç«æ¶ˆè€—
- `tick.ts`: ç§»é™¤æ—§æ¶ˆè€—é€»è¾‘
- `FoodStatusPanel.tsx`: æ–°å¢ç»„ä»¶

### v0.1.5 (2025-01-07) - èŒä¸šä¸ç§‘æŠ€
**æ–°å¢åŠŸèƒ½**:
- âœ… èŒä¸šç³»ç»Ÿ (é‡‡é›†è€…/ä¼æœ¨å·¥/ç¢çŸ³å·¥)
- âœ… ç§‘æŠ€æ ‘ (3 é¡¹ç§‘æŠ€)
- âœ… è®®äº‹åœº (ä¸»åŠ¨ç©æ³•)
- âœ… éƒ¨è½ç®¡ç†é¢æ¿
- âœ… ç§‘æŠ€æ ‘é¢æ¿

### v0.1.0 (2025-01-06) - åŸºç¡€å¾ªç¯
**åˆå§‹ç‰ˆæœ¬**:
- âœ… å­£èŠ‚ç³»ç»Ÿ
- âœ… ç¯ç«ç³»ç»Ÿ
- âœ… äººå£ç³»ç»Ÿ
- âœ… èµ„æºé‡‡é›†
- âœ… å»ºç­‘ (5 ç§)

---

## 9. æ€§èƒ½æŒ‡æ ‡

### å½“å‰æ€§èƒ½ (v0.3.0)
- **å¸§ç‡**: ç¨³å®š 60 FPS
- **å†…å­˜**: ~50MB (åˆå§‹)
- **åŒ…å¤§å°**: ~500KB (gzipped)
- **Tick æ—¶é—´**: <1ms
- **æ¯ç§’æ—¥å¿—è¾“å‡º**: 0 æ¡ (ä¿®å¤å‰ 110 æ¡)
- **æ¯å¸§æœ€å¤§tick**: 10 ä¸ª (ä¿®å¤å‰æ— é™åˆ¶)
- **è½®è¯¢ç³»ç»Ÿ**: 1 ä¸ªä¸»è½®è¯¢æº (ä¿®å¤å‰ 4 ä¸ªç‹¬ç«‹)

### ç›®æ ‡æ€§èƒ½ (Era 2)
- **å¸§ç‡**: ä¿æŒ 60 FPS
- **å†…å­˜**: <100MB
- **Tick æ—¶é—´**: <5ms (æ›´å¤æ‚é€»è¾‘)

---

## 10. å·²çŸ¥é—®é¢˜

### Bug åˆ—è¡¨
- [x] ä¼æœ¨å·¥å’Œé‡‡é›†è€…æ— æ³•åˆ†é… (å·²ä¿®å¤ âœ…)
- [x] è‡ªåŠ¨åŠ æŸ´å¯èƒ½å¤±æ•ˆ (å·²ä¿®å¤ âœ…)
- [x] å†¬å­£äººå£å¯èƒ½å¼‚å¸¸æ­»äº¡ (å¾…éªŒè¯ âœ… - å·²ä¿®å¤å˜é‡é‡å®šä¹‰é—®é¢˜)
- [x] æ€§èƒ½ç“¶é¢ˆ - è°ƒè¯•æ—¥å¿—è¾“å‡º (å·²ä¿®å¤ âœ… - åˆ é™¤ tribeSlice 11æ¡console.log)
- [x] æ¸¸æˆå¾ªç¯é¦–å¸§çˆ†å‘bug (å·²ä¿®å¤ âœ… - æ·»åŠ è·³è¿‡é¦–å¸§é€»è¾‘)
- [x] æ•å…½é™·é˜±é€»è¾‘å®Œå…¨å¤±æ•ˆ (å·²ä¿®å¤ âœ… - é‡æ„æ¦‚ç‡è®¡ç®—)
- [x] LogPanelæ¶æ„è¿è§„ (å·²ä¿®å¤ âœ… - æ”¹ä¸ºè½®è¯¢æ¨¡å¼)
- [x] UIç¼ºå°‘çŸ³æ–™ã€ç”Ÿè‚‰ã€è‚‰å¹²ã€ç†å¿µè¿½è¸ª (å·²ä¿®å¤ âœ… - æ·»åŠ åˆ°GameUIContext)
- [x] ResourcePanelç‹¬ç«‹è½®è¯¢ (å·²ä¿®å¤ âœ… - ç§»é™¤ç‹¬ç«‹intervalï¼Œä½¿ç”¨GameUIContext)
- [x] å­—ç¬¦ä¸²æ¯”è¾ƒå¯¼è‡´UIè¯¯åˆ¤ (å·²ä¿®å¤ âœ… - æ”¹ä¸ºDecimalç²¾ç¡®æ¯”è¾ƒ)
- [x] Decimal.jsç²¾åº¦æŸå¤± (å·²ä¿®å¤ âœ… - ä¿®å¤ActionPanelã€CompactActionsã€eventSliceæ··ç”¨é—®é¢˜)
- [x] tick.tsè°ƒè¯•ä»£ç æ®‹ç•™ (å·²ä¿®å¤ âœ… - ç§»é™¤console.log)
- [x] æ— æœ€å¤§tické™åˆ¶ (å·²ä¿®å¤ âœ… - æ·»åŠ æ¯å¸§10tické™åˆ¶)
- [x] çŠ¶æ€å¿«ç…§é€»è¾‘æ··ä¹± (å·²ä¿®å¤ âœ… - æ¸…æ™°çš„å˜é‡å‘½å)

### UI é—®é¢˜
- [ ] ç§»åŠ¨ç«¯å¸ƒå±€æœªä¼˜åŒ–
- [ ] é¢æ¿è¿‡å¤šå¯¼è‡´æ‹¥æŒ¤
- [ ] æ— åŠ è½½åŠ¨ç”»

### å¹³è¡¡æ€§é—®é¢˜
- [ ] å†¬å­£å¯èƒ½è¿‡éš¾
- [ ] ç§‘æŠ€æˆæœ¬éœ€è¦æµ‹è¯•
- [ ] åæœŸç›®æ ‡ç¼ºå¤±

---

 ## ç»“è®º

### å½“å‰åŸºç¡€ç‰¢é æ€§è¯„åˆ†: â­â­â­â­â­ (5/5) - Phase 1 å®Œæˆ

**ä¼˜ç‚¹**:
1. âœ… æ•°å€¼ç³»ç»Ÿå®Œå…¨ç‰¢é  (Decimal.js)
2. âœ… çŠ¶æ€ç®¡ç†æ¶æ„ä¼˜ç§€ (Zustand Slice + Persist)
3. âœ… æ¸¸æˆå¾ªç¯ç²¾ç¡®ç¨³å®š
4. âœ… æ ¸å¿ƒæœºåˆ¶å®Œæ•´ (å­£èŠ‚/ç¯ç«/èŒä¸š/äº‹ä»¶)
5. âœ… æ‰€æœ‰å·²çŸ¥Bugå·²ä¿®å¤ (15+ ä¸ªé—®é¢˜å…¨éƒ¨è§£å†³)
6. âœ… ä»£ç è´¨é‡ä¼˜ç§€ (æ— ç±»å‹é”™è¯¯ï¼ŒDecimal.jså®Œå…¨ä½¿ç”¨)
7. âœ… æ€§èƒ½ä¼˜åŒ–å®Œæˆ (ç§»é™¤è°ƒè¯•æ—¥å¿—ï¼Œä¼˜åŒ–è½®è¯¢)
8. âœ… éšæœºäº‹ä»¶ç³»ç»Ÿå®Œæ•´ (6 ä¸ªäº‹ä»¶ï¼ŒåŒ…å« Debuff å’Œç‰¹æ®ŠåŠ¨ä½œ)
9. âœ… ä¼ ç»Ÿèµ„æºä½“ç³»å®Œæ•´ (3 ç§è·å–æ–¹å¼ï¼Œæ­»äº¡è½¬åŒ–è¡¥å¿)
10. âœ… æ–‡åŒ–å»ºç­‘ç³»ç»Ÿå®ç° (å›¾è…¾æŸ±ã€å¢“åœ°ã€ç››å¤§ç¥­å…¸)
11. âœ… èƒœåˆ©æ¡ä»¶ç³»ç»Ÿå®ç° (éƒ¨è½å¤§å…ã€èƒœåˆ©å¼¹çª—)
12. âœ… æŒä¹…åŒ–ç³»ç»Ÿå®Œæ•´ (è‡ªåŠ¨ä¿å­˜/æ¢å¤/é‡ç½®)

**å»ºè®®**:
1. âœ… Phase 1 å®Œæˆï¼Œå¯æŠ•å…¥ç”Ÿäº§ç¯å¢ƒ
2. âš ï¸ åæœŸå†…å®¹ä¸è¶³ï¼ˆEra 2 è§„åˆ’ä¸­ï¼Œä¼ ç»Ÿèµ„æºå·²å®ç°ï¼‰
3. âš ï¸ æ–°æ‰‹å¼•å¯¼ç¼ºå¤±ï¼ˆå¯é€‰ä¼˜åŒ–ï¼Œä¸å½±å“æ ¸å¿ƒç©æ³•ï¼‰

### Phase 1 æ€»ç»“

**å·²å®Œæˆæ ¸å¿ƒæœºåˆ¶**:
- âœ… 10 TPS æ¸¸æˆå¾ªç¯ï¼Œdelta time ç²¾ç¡®æ§åˆ¶
- âœ… å­£èŠ‚ç³»ç»Ÿï¼ˆæ˜¥/å¤/ç§‹/å†¬ï¼Œ90å¤©å¾ªç¯ï¼‰
- âœ… ç¯ç«ç³»ç»Ÿï¼ˆç‡ƒæ–™ã€çŠ¶æ€ã€è‡ªåŠ¨åŠ æŸ´ï¼‰
- âœ… äººå£ç³»ç»Ÿï¼ˆè‡ªç„¶å¢é•¿ã€é¥¥é¥¿ã€å†»ç»“ï¼‰
- âœ… èµ„æºç³»ç»Ÿï¼ˆ8ç§èµ„æºï¼ŒDecimal.js ç²¾åº¦ï¼‰
- âœ… èŒä¸šç³»ç»Ÿï¼ˆ5ç§èŒä¸šï¼ŒåŠ¨æ€åˆ†é…ï¼‰
- âœ… ç§‘æŠ€æ ‘ï¼ˆ3é¡¹ç§‘æŠ€ï¼Œè§£é”æ–°æœºåˆ¶ï¼‰
- âœ… å»ºç­‘ç³»ç»Ÿï¼ˆ10ç§å»ºç­‘ï¼Œ5ä¸ªåˆ†ç±»ï¼‰
- âœ… éšæœºäº‹ä»¶ï¼ˆ6ä¸ªäº‹ä»¶ï¼ŒDebuff + ç‰¹æ®ŠåŠ¨ä½œï¼‰
- âœ… ä¼ ç»Ÿèµ„æºï¼ˆEra 2 é“ºå«ï¼Œ3ç§è·å–æ–¹å¼ï¼‰
- âœ… èƒœåˆ©æ¡ä»¶ï¼ˆéƒ¨è½å¤§å…ï¼Œèƒœåˆ©å¼¹çª—ï¼‰
- âœ… æŒä¹…åŒ–ç³»ç»Ÿï¼ˆè‡ªåŠ¨ä¿å­˜/æ¢å¤ï¼‰

**æ¸¸æˆä½“éªŒ**:
- âœ… ç”Ÿå­˜å‹åŠ›ï¼ˆå­£èŠ‚ã€èµ„æºæ¶ˆè€—ï¼‰
- âœ… å¾®æ“éœ€æ±‚ï¼ˆèŒä¸šåˆ†é…ã€ç¯ç«ç®¡ç†ï¼‰
- âœ… æˆé•¿æ„Ÿï¼ˆç§‘æŠ€ã€å»ºç­‘ã€äººå£ï¼‰
- âœ… æŒ«è´¥æ„Ÿç¼“è§£ï¼ˆæ­»äº¡è½¬åŒ–ã€å¤šç§èµ„æºï¼‰
- âœ… é•¿æœŸç›®æ ‡ï¼ˆä¼ ç»Ÿèµ„æº â†’ Era 2ï¼‰

### èƒ½å¦å¼€å§‹ Era 2 å¼€å‘?

**è¯„ä¼°**: âœ… **å¯ä»¥ï¼ŒPhase 1 å·²å®Œæˆï¼Œå»ºè®®ç«‹å³å¼€å§‹ Era 2 å¼€å‘**

**ç†ç”±**:
1. âœ… åŸºç¡€æ¶æ„å®Œå…¨æ”¯æŒæ‰©å±•
2. âœ… æ ¸å¿ƒå¾ªç¯å·²ç»ç¨³å®š
3. âœ… æŠ€æœ¯å€ºåŠ¡å¯æ§
4. âœ… Era 2 è§£é”èµ„æº (ä¼ ç»Ÿ) å·²å®ç°
5. âœ… ä¼ ç»Ÿèµ„æºè·å–æ–¹å¼å®Œæ•´ (è¢«åŠ¨/ä¸»åŠ¨/è¡¥å¿)
6. âœ… æ­»äº¡è½¬åŒ–æœºåˆ¶é™ä½æŒ«è´¥æ„Ÿï¼Œæå‡æ¸¸æˆä½“éªŒ
7. âœ… å»ºç­‘ç³»ç»Ÿæ”¯æŒæ–‡åŒ–åˆ†ç±»æ‰©å±•
8. âœ… èƒœåˆ©æ¡ä»¶å®Œæ•´å®ç°
9. âœ… æŒä¹…åŒ–ç³»ç»Ÿä¿è¯æ¸¸æˆè¿›åº¦
10. âœ… Phase 1 ç”Ÿäº§å°±ç»ªï¼Œå¯æŠ•å…¥ç”Ÿäº§ç¯å¢ƒ

**å»ºè®®**:
1. âœ… å¼€å§‹ Era 2 (ç‹å›½æ—¶ä»£) è§„åˆ’ä¸å¼€å‘
2. âœ… å®ç°ä¼ ç»Ÿèµ„æº 500 â†’ Era 2 è½¬æ¢
3. âœ… æ·»åŠ å¹¸ç¦åº¦ã€ç¨æ”¶ã€æ”¿ç­–ç³»ç»Ÿ
4. âœ… æ‰©å±•å»ºç­‘ (æˆ¿å±‹ã€å¸‚åœºã€å…µè¥ã€å›¾ä¹¦é¦†)
5. âœ… å®ç°æ”¿æ²»ç³»ç»Ÿï¼ˆéƒ¨è½ â†’ ç‹å›½è½¬å‹ï¼‰

---

**æ–‡æ¡£ç»´æŠ¤**: è¯·åœ¨æ¯æ¬¡é‡å¤§æ›´æ–°ååŒæ­¥æ›´æ–°æ­¤æ–‡æ¡£
**æœ€åå®¡æŸ¥**: 2026-01-08
**ä¸‹æ¬¡å®¡æŸ¥**: Phase 2.0 å¼€å§‹æ—¶
